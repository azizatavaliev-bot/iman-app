import{s as N,j as e,C as $,e as M,d as L,b as W,v as _,S as B,P as Y}from"./index-Cln3HTWx.js";import{u as q,b as r}from"./vendor-CpRrxz-h.js";import{S as I}from"./square-CRIWXBnC.js";import{Z as G}from"./zap-ff8R4ufw.js";const w=[{key:"quran",label:"–ö–æ—Ä–∞–Ω",emoji:"üìñ"},{key:"dhikr",label:"–ó–∏–∫—Ä",emoji:"üìø"},{key:"dua",label:"–î—É–∞",emoji:"ü§≤"},{key:"reflection",label:"–†–∞–∑–º—ã—à–ª–µ–Ω–∏–µ",emoji:"üåô"},{key:"general",label:"–û–±—â–∏–π",emoji:"‚ò™Ô∏è"}],C=["¬´–ü–æ–º–∏–Ω–∞–π—Ç–µ –ú–µ–Ω—è, –∏ –Ø –±—É–¥—É –ø–æ–º–Ω–∏—Ç—å –æ –≤–∞—Å¬ª ‚Äî –ö–æ—Ä–∞–Ω 2:152","¬´–†–∞–∑–≤–µ –Ω–µ –ø–æ–º–∏–Ω–∞–Ω–∏–µ–º –ê–ª–ª–∞—Ö–∞ —É—Å–ø–æ–∫–∞–∏–≤–∞—é—Ç—Å—è —Å–µ—Ä–¥—Ü–∞?¬ª ‚Äî –ö–æ—Ä–∞–Ω 13:28","¬´–ë–ª–∏–∂–µ –≤—Å–µ–≥–æ —Ä–∞–± –∫ —Å–≤–æ–µ–º—É –ì–æ—Å–ø–æ–¥—É –≤–æ –≤—Ä–µ–º—è —Å—É–¥–∂—É–¥–∞¬ª ‚Äî –ú—É—Å–ª–∏–º","¬´–ö—Ç–æ –ø—Ä–∏–±–ª–∏–∑–∏—Ç—Å—è –∫–æ –ú–Ω–µ –Ω–∞ –ø—è–¥—å, –Ø –ø—Ä–∏–±–ª–∏–∂—É—Å—å –∫ –Ω–µ–º—É –Ω–∞ –ª–æ–∫–æ—Ç—å¬ª ‚Äî –ë—É—Ö–∞—Ä–∏","¬´–õ—É—á—à–∏–π –∑–∏–∫—Ä ‚Äî –õ—è –∏–ª—è—Ö–∞ –∏–ª–ª—è–õ–ª–∞—Ö¬ª ‚Äî –¢–∏—Ä–º–∏–∑–∏","¬´–î–≤–∞ —Å–ª–æ–≤–∞ –ª–µ–≥–∫–∏ –Ω–∞ —è–∑—ã–∫–µ, —Ç—è–∂–µ–ª—ã –Ω–∞ –≤–µ—Å–∞—Ö: –°—É–±—Ö–∞–Ω–∞–õ–ª–∞—Ö–∏ –≤–∞ –±–∏—Ö–∞–º–¥–∏—Ö–∏, –°—É–±—Ö–∞–Ω–∞–õ–ª–∞—Ö–∏–ª—å –ê–∑—ã–º¬ª ‚Äî –ë—É—Ö–∞—Ä–∏","¬´–¢–æ—Ç, –∫—Ç–æ —á–∏—Ç–∞–µ—Ç –ö–æ—Ä–∞–Ω –∏ –¥–µ–π—Å—Ç–≤—É–µ—Ç –ø–æ –Ω–µ–º—É ‚Äî –µ–≥–æ —Ä–æ–¥–∏—Ç–µ–ª–∏ –±—É–¥—É—Ç —É–≤–µ–Ω—á–∞–Ω—ã —Å–≤–µ—Ç–æ–º¬ª ‚Äî –ê–±—É –î–∞—É–¥","¬´–î—É–∞ ‚Äî —ç—Ç–æ —Å—É—Ç—å –ø–æ–∫–ª–æ–Ω–µ–Ω–∏—è¬ª ‚Äî –¢–∏—Ä–º–∏–∑–∏","¬´–ü–æ–∏—Å—Ç–∏–Ω–µ, –≤ –ø–æ–º–∏–Ω–∞–Ω–∏–∏ –ê–ª–ª–∞—Ö–∞ ‚Äî –∂–∏–∑–Ω—å —Å–µ—Ä–¥–µ—Ü¬ª ‚Äî –ò–±–Ω –¢–∞–π–º–∏—è","¬´–ß–∞—Å —Ä–∞–∑–º—ã—à–ª–µ–Ω–∏—è –ª—É—á—à–µ –≥–æ–¥–∞ –ø–æ–∫–ª–æ–Ω–µ–Ω–∏—è –±–µ–∑ —Ä–∞–∑–º—ã—à–ª–µ–Ω–∏—è¬ª ‚Äî –∞–ª—å-–•–∞—Å–∞–Ω –∞–ª—å-–ë–∞—Å—Ä–∏"];function K(a){const s=Math.floor(a/60),i=a%60;return`${String(s).padStart(2,"0")}:${String(i).padStart(2,"0")}`}function U(a){try{return new Date(a).toLocaleTimeString("ru-RU",{hour:"2-digit",minute:"2-digit"})}catch{return""}}function F(a){return w.find(s=>s.key===a)?.emoji||"‚ò™Ô∏è"}function H(a){return w.find(s=>s.key===a)?.label||"–û–±—â–∏–π"}function Q(){return C[Math.floor(Math.random()*C.length)]}function Z({points:a,visible:s,onDone:i}){if(r.useEffect(()=>{if(s){const l=setTimeout(i,2500);return()=>clearTimeout(l)}},[s,i]),!s)return null;const o=Array.from({length:20},(l,d)=>({id:d,x:Math.random()*100,delay:Math.random()*.4,duration:1.2+Math.random()*1,size:4+Math.random()*5,color:["#10b981","#f59e0b","#8b5cf6","#06b6d4","#fbbf24"][d%5]}));return e.jsxs("div",{className:"fixed inset-0 z-50 pointer-events-none flex items-center justify-center",children:[o.map(l=>e.jsx("div",{className:"absolute rounded-full",style:{left:`${l.x}%`,top:"30%",width:l.size,height:l.size,backgroundColor:l.color,animation:`reward-particle ${l.duration}s ${l.delay}s ease-out forwards`}},l.id)),e.jsx("div",{className:"animate-reward-badge",children:e.jsxs("div",{className:"flex items-center gap-3 px-8 py-4 rounded-2xl bg-emerald-500/20 border border-emerald-500/40 backdrop-blur-xl shadow-2xl shadow-emerald-500/20",children:[e.jsx("span",{className:"text-3xl",children:"üåü"}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-3xl font-bold text-emerald-400",children:["+",a]}),e.jsx("div",{className:"text-sm text-emerald-400/70",children:"–±–∞–ª–ª–æ–≤ –∑–∞—Ä–∞–±–æ—Ç–∞–Ω–æ"})]})]})}),e.jsx("style",{children:`
        @keyframes reward-particle {
          0% { transform: translateY(0) scale(0); opacity: 0; }
          20% { transform: translateY(-20px) scale(1.2); opacity: 1; }
          100% { transform: translateY(60vh) rotate(720deg) scale(0.2); opacity: 0; }
        }
        @keyframes reward-badge-anim {
          0% { transform: scale(0.3); opacity: 0; }
          30% { transform: scale(1.15); opacity: 1; }
          50% { transform: scale(1); }
          80% { transform: scale(1); opacity: 1; }
          100% { transform: scale(0.8); opacity: 0; }
        }
        .animate-reward-badge {
          animation: reward-badge-anim 2.5s ease-out forwards;
        }
      `})]})}function V({elapsedSeconds:a,isActive:s}){const d=2*Math.PI*94,f=a%60/60,v=d-f*d,u=Math.floor(a/60),x=u*Y.IBADAH_MINUTE;return e.jsxs("div",{className:"relative flex items-center justify-center",children:[s&&e.jsx("div",{className:"absolute rounded-full animate-pulse-glow",style:{width:230,height:230,background:"radial-gradient(circle, rgba(16,185,129,0.12) 0%, transparent 70%)"}}),e.jsxs("svg",{width:200,height:200,className:"transform -rotate-90",children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"timer-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#10b981"}),e.jsx("stop",{offset:"100%",stopColor:"#34d399"})]}),e.jsxs("filter",{id:"glow",children:[e.jsx("feGaussianBlur",{stdDeviation:"3",result:"blur"}),e.jsxs("feMerge",{children:[e.jsx("feMergeNode",{in:"blur"}),e.jsx("feMergeNode",{in:"SourceGraphic"})]})]})]}),e.jsx("circle",{cx:200/2,cy:200/2,r:94,stroke:"rgba(255,255,255,0.06)",strokeWidth:6,fill:"none"}),e.jsx("circle",{cx:200/2,cy:200/2,r:94,stroke:"url(#timer-gradient)",strokeWidth:6,fill:"none",strokeDasharray:d,strokeDashoffset:v,strokeLinecap:"round",filter:s?"url(#glow)":void 0,className:"transition-all duration-300 ease-linear"}),u>0&&Array.from({length:Math.min(u,60)},(k,b)=>{const m=b/60*2*Math.PI-Math.PI/2,g=84,j=89;return e.jsx("line",{x1:200/2+g*Math.cos(m),y1:200/2+g*Math.sin(m),x2:200/2+j*Math.cos(m),y2:200/2+j*Math.sin(m),stroke:"rgba(16,185,129,0.3)",strokeWidth:1.5,strokeLinecap:"round"},b)})]}),e.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[e.jsx("span",{className:"text-4xl font-mono font-bold text-white tracking-wider",children:K(a)}),x>0&&e.jsxs("div",{className:"flex items-center gap-1 mt-2 text-amber-400",children:[e.jsxs("span",{className:"text-lg font-semibold",children:["+",x]}),e.jsx("span",{className:"text-lg",children:"üåü"})]}),x===0&&a>0&&e.jsx("div",{className:"text-xs text-gray-500 mt-2",children:"< 1 –º–∏–Ω –¥–ª—è –±–∞–ª–ª–æ–≤"})]}),e.jsx("style",{children:`
        @keyframes pulse-glow-anim {
          0%, 100% { transform: scale(1); opacity: 0.6; }
          50% { transform: scale(1.08); opacity: 1; }
        }
        .animate-pulse-glow {
          animation: pulse-glow-anim 2s ease-in-out infinite;
        }
      `})]})}function se(){const a=q(),[s,i]=r.useState("idle"),[o,l]=r.useState("general"),[d,h]=r.useState(0),[f,v]=r.useState(""),[u,x]=r.useState(!1),[k,b]=r.useState(0),[m]=r.useState(()=>Q()),[g,j]=r.useState(0),c=r.useRef(null),T=N.getTodayIbadahMinutes(),z=N.getTotalIbadahMinutes(),y=N.getIbadahSessions(),R=new Date().toISOString().slice(0,10),p=y.filter(t=>t.date===R),E=p.reduce((t,n)=>t+n.pointsEarned,0);r.useEffect(()=>()=>{c.current&&clearInterval(c.current)},[]);const P=r.useCallback(()=>{const t=new Date().toISOString();v(t),h(0),i("running"),c.current=setInterval(()=>{h(n=>n+1)},1e3)},[]),A=r.useCallback(()=>{c.current&&(clearInterval(c.current),c.current=null),i("paused")},[]),D=r.useCallback(()=>{i("running"),c.current=setInterval(()=>{h(t=>t+1)},1e3)},[]),S=r.useCallback(()=>{c.current&&(clearInterval(c.current),c.current=null);const t=Math.floor(d/60);if(t>=1){const n=N.addIbadahSession({startedAt:f,durationMinutes:t,type:o});navigator.vibrate?.(200),b(n.pointsEarned),x(!0)}i("idle"),h(0),j(n=>n+1)},[d,f,o]),O=r.useCallback(()=>{x(!1)},[]);return e.jsxs("div",{className:"min-h-screen pb-28",children:[e.jsx(Z,{points:k,visible:u,onDone:O}),e.jsxs("div",{className:"flex items-center gap-3 px-4 pt-6 pb-4",children:[e.jsx("button",{onClick:()=>a(-1),className:"w-10 h-10 rounded-full t-bg border t-border-s flex items-center justify-center text-gray-400 hover:text-white active:scale-90 transition-all",children:e.jsx($,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-white",children:"–¢–∞–π–º–µ—Ä –∏–±–∞–¥–∞—Ç–∞"}),e.jsx("p",{className:"text-emerald-400/60 text-xs",children:"–í—Ä–µ–º—è —Å –ê–ª–ª–∞—Ö–æ–º"})]})]}),e.jsx("div",{className:"px-4 mb-6",children:e.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2 scrollbar-hide",children:w.map(t=>e.jsxs("button",{onClick:()=>{s==="idle"&&l(t.key)},disabled:s!=="idle",className:`flex items-center gap-2 px-4 py-2 rounded-full border whitespace-nowrap text-sm font-medium transition-all ${o===t.key?"bg-emerald-500/20 border-emerald-500/50 text-emerald-300":"t-bg t-border-s text-gray-400 hover:text-gray-300"} ${s!=="idle"?"opacity-50 cursor-not-allowed":"active:scale-95"}`,children:[e.jsx("span",{children:t.emoji}),e.jsx("span",{children:t.label})]},t.key))})}),e.jsxs("div",{className:"flex flex-col items-center px-4 mb-6",children:[e.jsx(V,{elapsedSeconds:d,isActive:s==="running"}),s!=="idle"&&e.jsx("div",{className:"mt-4 mx-4 px-5 py-3 t-bg backdrop-blur-sm border t-border-s rounded-xl",children:e.jsx("p",{className:"text-xs text-amber-400/80 text-center italic leading-relaxed",children:m})})]}),e.jsxs("div",{className:"flex items-center justify-center gap-4 px-4 mb-8",children:[s==="idle"&&e.jsxs("button",{onClick:P,className:"bg-emerald-500 hover:bg-emerald-600 text-white font-bold py-4 px-12 rounded-full text-lg flex items-center gap-3 active:scale-95 transition-all shadow-lg shadow-emerald-500/25",children:[e.jsx(M,{className:"w-5 h-5 fill-white"}),"–°–¢–ê–†–¢"]}),s==="running"&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:A,className:"bg-amber-500/20 text-amber-400 border border-amber-500/30 font-bold py-4 px-8 rounded-full text-lg flex items-center gap-2 active:scale-95 transition-all",children:[e.jsx(L,{className:"w-5 h-5"}),"–ü–ê–£–ó–ê"]}),e.jsxs("button",{onClick:S,className:"bg-red-500/20 text-red-400 border border-red-500/30 font-bold py-4 px-8 rounded-full text-lg flex items-center gap-2 active:scale-95 transition-all",children:[e.jsx(I,{className:"w-4 h-4 fill-red-400"}),"–°–¢–û–ü"]})]}),s==="paused"&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:D,className:"bg-emerald-500 hover:bg-emerald-600 text-white font-bold py-4 px-8 rounded-full text-lg flex items-center gap-2 active:scale-95 transition-all shadow-lg shadow-emerald-500/25",children:[e.jsx(M,{className:"w-5 h-5 fill-white"}),"–ü–†–û–î–û–õ–ñ–ò–¢–¨"]}),e.jsxs("button",{onClick:S,className:"bg-red-500/20 text-red-400 border border-red-500/30 font-bold py-4 px-8 rounded-full text-lg flex items-center gap-2 active:scale-95 transition-all",children:[e.jsx(I,{className:"w-4 h-4 fill-red-400"}),"–°–¢–û–ü"]})]})]}),e.jsx("div",{className:"px-4 mb-4",children:e.jsxs("div",{className:"t-bg backdrop-blur-sm border t-border-s rounded-2xl p-5",children:[e.jsxs("h3",{className:"text-sm font-semibold text-white mb-3 flex items-center gap-2",children:[e.jsx(W,{className:"w-4 h-4 text-emerald-400"}),"–°–µ–≥–æ–¥–Ω—è"]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-white",children:T}),e.jsx("div",{className:"text-xs text-gray-500 mt-0.5",children:"–º–∏–Ω—É—Ç"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-amber-400",children:E}),e.jsx("div",{className:"text-xs text-gray-500 mt-0.5",children:"–±–∞–ª–ª–æ–≤"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-emerald-400",children:p.length}),e.jsx("div",{className:"text-xs text-gray-500 mt-0.5",children:"—Å–µ—Å—Å–∏–π"})]})]})]})}),e.jsxs("div",{className:"px-4 mb-4",children:[e.jsxs("h3",{className:"text-sm font-semibold text-white mb-3 flex items-center gap-2",children:[e.jsx(_,{className:"w-4 h-4 text-emerald-400"}),"–ò—Å—Ç–æ—Ä–∏—è —Å–µ—Å—Å–∏–π"]}),p.length===0?e.jsxs("div",{className:"t-bg backdrop-blur-sm border t-border-s rounded-2xl p-6 text-center",children:[e.jsx("div",{className:"text-3xl mb-2",children:"üïå"}),e.jsx("p",{className:"text-gray-400 text-sm",children:"–ù–∞—á–Ω–∏—Ç–µ —Å–≤–æ—é –ø–µ—Ä–≤—É—é —Å–µ—Å—Å–∏—é –∏–±–∞–¥–∞—Ç–∞ —Å–µ–≥–æ–¥–Ω—è"}),e.jsx("p",{className:"text-emerald-400/50 text-xs mt-1",children:"–ö–∞–∂–¥–∞—è –º–∏–Ω—É—Ç–∞ –ø—Ä–∏–±–ª–∏–∂–∞–µ—Ç –≤–∞—Å –∫ –ê–ª–ª–∞—Ö—É"})]}):e.jsx("div",{className:"space-y-2",children:[...p].reverse().map((t,n)=>e.jsxs("div",{className:"t-bg backdrop-blur-sm border t-border-s rounded-2xl p-4 flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-emerald-500/10 flex items-center justify-center text-lg shrink-0",children:F(t.type)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm font-medium text-white",children:H(t.type)}),e.jsx("span",{className:"text-xs text-gray-500",children:U(t.startedAt)})]}),e.jsxs("div",{className:"text-xs text-gray-400 mt-0.5",children:[t.durationMinutes," –º–∏–Ω"]})]}),e.jsxs("div",{className:"flex items-center gap-1 text-amber-400 font-semibold text-sm",children:[e.jsxs("span",{children:["+",t.pointsEarned]}),e.jsx(B,{className:"w-3.5 h-3.5 fill-amber-400"})]})]},n))})]}),e.jsx("div",{className:"px-4 mb-6",children:e.jsxs("div",{className:"t-bg backdrop-blur-sm border t-border-s rounded-2xl p-5",children:[e.jsxs("h3",{className:"text-sm font-semibold text-white mb-3 flex items-center gap-2",children:[e.jsx(G,{className:"w-4 h-4 text-amber-400"}),"–û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞"]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-white",children:z}),e.jsx("div",{className:"text-xs text-gray-500 mt-0.5",children:"–º–∏–Ω—É—Ç –≤—Å–µ–≥–æ"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-amber-400",children:y.reduce((t,n)=>t+n.pointsEarned,0)}),e.jsx("div",{className:"text-xs text-gray-500 mt-0.5",children:"–±–∞–ª–ª–æ–≤ –≤—Å–µ–≥–æ"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-emerald-400",children:y.length}),e.jsx("div",{className:"text-xs text-gray-500 mt-0.5",children:"—Å–µ—Å—Å–∏–π –≤—Å–µ–≥–æ"})]})]})]})})]},g)}export{se as default};
