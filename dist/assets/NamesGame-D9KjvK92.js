import{s as I,j as e,a as Q,C as R,S as E,f as X,P as A,X as $}from"./index-Cln3HTWx.js";import{b as l}from"./vendor-CpRrxz-h.js";import{N as b}from"./data-content-C6zxCIss.js";import{A as Z}from"./award-CCoGt2bG.js";import{R as O}from"./rotate-ccw-DtCkybWM.js";function U(r){const d=[...r];for(let c=d.length-1;c>0;c--){const i=Math.floor(Math.random()*(c+1));[d[c],d[i]]=[d[i],d[c]]}return d}function F(r=[]){const d=b.map((o,a)=>a).filter(o=>!r.includes(o)),c=d.length>0?d[Math.floor(Math.random()*d.length)]:Math.floor(Math.random()*99),i=b[c].russian,u=b.filter((o,a)=>a!==c),m=U(u).slice(0,3),x=U([i,...m.map(o=>o.russian)]);return{nameIndex:c,options:x,correctIndex:x.indexOf(i)}}const M=10,L=15;function ee(){const[r,d]=l.useState("cards"),[c,i]=l.useState([]),[u,m]=l.useState(0);l.useEffect(()=>{const t=I.getNamesProgress();i(t.learned),m(t.quizHighScore)},[]);const x=l.useCallback(t=>{const f=I.markNameLearned(t);I.recalculateTotalPoints(),i([...f.learned])},[]),o=l.useCallback(t=>{const j=I.getNamesProgress().learned.filter(w=>w!==t);I.updateNamesProgress({learned:j}),i(j)},[]),a=l.useCallback(t=>{const f=I.updateNamesProgress({quizHighScore:t});m(f.quizHighScore)},[]),s=[{key:"cards",label:"Карточки"},{key:"quiz",label:"Викторина"},{key:"all",label:"Все имена"}];return e.jsxs("div",{className:"min-h-screen pb-24",children:[e.jsxs("div",{className:"px-4 pt-6 pb-2",children:[e.jsx("h1",{className:"text-2xl font-bold text-white text-center mb-1",children:"99 Имён Аллаха"}),e.jsx("p",{className:"text-emerald-400/70 text-center text-sm",children:"Асма уль-Хусна"})]}),e.jsx("div",{className:"flex gap-1 mx-4 mt-4 p-1 rounded-xl glass",children:s.map(t=>e.jsx("button",{onClick:()=>d(t.key),className:`flex-1 py-2.5 rounded-lg text-sm font-medium transition-all duration-300 ${r===t.key?"bg-emerald-500/20 text-emerald-400 shadow-lg shadow-emerald-500/10":"text-gray-400 hover:text-gray-300"}`,children:t.label},t.key))}),e.jsxs("div",{className:"mt-4",children:[r==="cards"&&e.jsx(W,{learned:c,onMarkLearned:x,onUnmarkLearned:o}),r==="quiz"&&e.jsx(G,{highScore:u,onNewHighScore:a}),r==="all"&&e.jsx(D,{learned:c,onMarkLearned:x,onUnmarkLearned:o})]})]})}function W({learned:r,onMarkLearned:d,onUnmarkLearned:c}){const[i,u]=l.useState(0),[m,x]=l.useState(!1),[o,a]=l.useState(null),s=b[i],t=r.includes(s.id),f=l.useCallback(N=>{x(!0),setTimeout(()=>{u((N%b.length+b.length)%b.length),x(!1)},150)},[]),j=()=>f(i-1),w=()=>f(i+1),S=N=>{a(N.touches[0].clientX)},T=N=>{if(o===null)return;const y=N.changedTouches[0].clientX-o;Math.abs(y)>60&&(y>0?j():w()),a(null)};return e.jsxs("div",{className:"px-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("span",{className:"text-gray-400 text-sm",children:[r.length,"/99 выучено"]}),e.jsx("div",{className:"flex-1 mx-3 h-2 rounded-full t-bg overflow-hidden",children:e.jsx("div",{className:"h-full rounded-full bg-gradient-to-r from-emerald-500 to-emerald-400 transition-all duration-500",style:{width:`${r.length/99*100}%`}})}),e.jsxs("span",{className:"text-emerald-400 text-sm font-medium",children:[Math.round(r.length/99*100),"%"]})]}),e.jsxs("div",{className:`glass-card relative p-8 min-h-[380px] flex flex-col items-center justify-center transition-all duration-300 ${m?"opacity-0 scale-95":"opacity-100 scale-100"}`,onTouchStart:S,onTouchEnd:T,children:[t&&e.jsx("div",{className:"absolute top-4 right-4 w-8 h-8 rounded-full bg-emerald-500/20 flex items-center justify-center",children:e.jsx(Q,{className:"w-5 h-5 text-emerald-400"})}),e.jsxs("div",{className:"text-gray-500 text-sm mb-2",children:[s.id," / 99"]}),e.jsx("div",{className:"arabic-text text-5xl text-amber-400 mb-6 select-none leading-relaxed",children:s.arabic}),e.jsx("div",{className:"text-xl text-white font-semibold mb-2",children:s.transliteration}),e.jsx("div",{className:"text-lg text-emerald-400 mb-3",children:s.russian}),e.jsx("div",{className:"text-gray-400 text-sm text-center leading-relaxed max-w-sm",children:s.meaning})]}),e.jsxs("div",{className:"flex items-center justify-center gap-4 mt-6",children:[e.jsx("button",{onClick:j,className:"w-12 h-12 rounded-full glass flex items-center justify-center text-gray-400 hover:text-white active:scale-90 transition-all",children:e.jsx(R,{className:"w-6 h-6"})}),t?e.jsxs("button",{onClick:()=>c(s.id),className:"px-6 py-3 rounded-xl bg-emerald-500/20 text-emerald-400 font-medium flex items-center gap-2 active:scale-95 transition-all",children:[e.jsx(Q,{className:"w-5 h-5"}),"Выучено"]}):e.jsxs("button",{onClick:()=>d(s.id),className:"px-6 py-3 rounded-xl bg-gradient-to-r from-emerald-600 to-emerald-500 text-white font-medium flex items-center gap-2 active:scale-95 transition-all shadow-lg shadow-emerald-500/20 hover:shadow-emerald-500/40",children:[e.jsx(E,{className:"w-5 h-5"}),"Выучил"]}),e.jsx("button",{onClick:w,className:"w-12 h-12 rounded-full glass flex items-center justify-center text-gray-400 hover:text-white active:scale-90 transition-all",children:e.jsx(X,{className:"w-6 h-6"})})]}),e.jsx("div",{className:"mt-6 flex flex-wrap gap-1.5 justify-center",children:Array.from({length:10},(N,y)=>{const p=y*10,k=Math.min(p+9,98),_=b.slice(p,k+1).filter(C=>r.includes(C.id)).length,P=k-p+1;return e.jsxs("button",{onClick:()=>f(p),className:`text-xs px-2 py-1 rounded-md transition-all ${i>=p&&i<=k?"bg-emerald-500/30 text-emerald-300":_===P?"bg-emerald-500/10 text-emerald-500/60":"t-bg text-gray-500 hover:text-gray-400"}`,children:[p+1,"-",k+1]},y)})})]})}function G({highScore:r,onNewHighScore:d}){const[c,i]=l.useState("start"),[u,m]=l.useState([]),[x,o]=l.useState(0),[a,s]=l.useState(0),[t,f]=l.useState(null),[j,w]=l.useState(null),[S,T]=l.useState(L),[N,y]=l.useState(!1),[p,k]=l.useState(0),_=l.useCallback(()=>{const g=[],n=[];for(let h=0;h<M;h++){const v=F(g);g.push(v.nameIndex),n.push(v)}m(n),o(0),s(0),f(null),w(null),T(L),k(0),i("playing")},[]);l.useEffect(()=>{if(c!=="playing"||t!==null)return;if(S<=0){P(-1);return}const g=setInterval(()=>{T(n=>n-1)},1e3);return()=>clearInterval(g)},[c,S,t]);const P=l.useCallback(g=>{if(t!==null)return;const n=u[x],h=g===n.correctIndex;if(f(g),w(h),h){const v=A.NAMES_QUIZ;s(q=>q+v),k(q=>q+1),I.addExtraPoints(v)}else y(!0),k(0),setTimeout(()=>y(!1),500);setTimeout(()=>{if(x+1>=M){const v=h?a+A.NAMES_QUIZ:a;d(v),i("results")}else o(v=>v+1),f(null),w(null),T(L)},1200)},[t,u,x,a,d]);if(c==="start")return e.jsx("div",{className:"px-4 flex flex-col items-center",children:e.jsxs("div",{className:"glass-card p-8 w-full max-w-sm text-center",children:[e.jsx("div",{className:"w-20 h-20 rounded-full bg-gradient-to-br from-amber-500/20 to-emerald-500/20 flex items-center justify-center mx-auto mb-6",children:e.jsx(Z,{className:"w-10 h-10 text-amber-400"})}),e.jsx("h2",{className:"text-xl font-bold text-white mb-2",children:"Викторина"}),e.jsxs("p",{className:"text-gray-400 text-sm mb-6",children:["Проверьте свои знания 99 Имён Аллаха. ",M," вопросов,"," ",L," секунд на ответ."]}),r>0&&e.jsxs("div",{className:"flex items-center justify-center gap-2 mb-6 text-amber-400",children:[e.jsx(E,{className:"w-5 h-5 fill-amber-400"}),e.jsxs("span",{className:"text-sm font-medium",children:["Лучший результат: ",r]})]}),e.jsx("button",{onClick:_,className:"w-full py-3.5 rounded-xl bg-gradient-to-r from-emerald-600 to-emerald-500 text-white font-semibold text-lg active:scale-95 transition-all shadow-lg shadow-emerald-500/20",children:"Начать"})]})});if(c==="results"){const g=M*A.NAMES_QUIZ,n=Math.round(a/g*100),h=a>=r&&a>0;return e.jsx("div",{className:"px-4 flex flex-col items-center animate-fade-in",children:e.jsxs("div",{className:"glass-card p-8 w-full max-w-sm text-center",children:[h&&e.jsxs("div",{className:"mb-4 py-2 px-4 rounded-full bg-amber-500/15 text-amber-400 text-sm font-medium inline-flex items-center gap-2",children:[e.jsx(E,{className:"w-4 h-4 fill-amber-400"}),"Новый рекорд!"]}),e.jsx("div",{className:`w-24 h-24 rounded-full flex items-center justify-center mx-auto mb-6 ${n>=70?"bg-emerald-500/20 glow-green":n>=40?"bg-amber-500/20 glow-gold":"bg-red-500/20"}`,children:e.jsxs("span",{className:"text-3xl font-bold text-white",children:[n,"%"]})}),e.jsx("h2",{className:"text-xl font-bold text-white mb-1",children:n>=90?"Превосходно!":n>=70?"Отлично!":n>=50?"Хорошо!":"Продолжайте учить!"}),e.jsxs("p",{className:"text-gray-400 text-sm mb-6",children:["Вы набрали"," ",e.jsx("span",{className:"text-emerald-400 font-semibold",children:a})," из"," ",e.jsx("span",{className:"text-gray-300",children:g})," баллов"]}),e.jsxs("div",{className:"flex items-center justify-center gap-4 mb-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-white",children:Math.round(a/A.NAMES_QUIZ)}),e.jsx("div",{className:"text-xs text-gray-500",children:"Верных"})]}),e.jsx("div",{className:"w-px h-10 t-bg"}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-white",children:M-Math.round(a/A.NAMES_QUIZ)}),e.jsx("div",{className:"text-xs text-gray-500",children:"Ошибок"})]}),e.jsx("div",{className:"w-px h-10 t-bg"}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-amber-400",children:r}),e.jsx("div",{className:"text-xs text-gray-500",children:"Рекорд"})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:()=>i("start"),className:"flex-1 py-3 rounded-xl glass text-gray-300 font-medium flex items-center justify-center gap-2 active:scale-95 transition-all",children:[e.jsx(O,{className:"w-4 h-4"}),"Меню"]}),e.jsx("button",{onClick:_,className:"flex-1 py-3 rounded-xl bg-gradient-to-r from-emerald-600 to-emerald-500 text-white font-medium active:scale-95 transition-all shadow-lg shadow-emerald-500/20",children:"Ещё раз"})]})]})})}const C=u[x],z=b[C.nameIndex],H=S/L*100;return e.jsxs("div",{className:"px-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-emerald-400 font-bold text-lg",children:a}),e.jsx("span",{className:"text-gray-500 text-sm",children:"баллов"})]}),e.jsxs("div",{className:"text-gray-400 text-sm",children:[x+1," / ",M]}),p>=2&&e.jsxs("div",{className:"flex items-center gap-1 text-amber-400 text-sm font-medium",children:[e.jsx(E,{className:"w-4 h-4 fill-amber-400"}),"x",p]})]}),e.jsx("div",{className:"w-full h-1.5 rounded-full t-bg mb-6 overflow-hidden",children:e.jsx("div",{className:`h-full rounded-full transition-all duration-1000 linear ${S<=5?"bg-red-500":S<=10?"bg-amber-500":"bg-emerald-500"}`,style:{width:`${H}%`}})}),e.jsxs("div",{className:`glass-card p-8 text-center mb-6 transition-transform duration-300 ${N?"animate-[shake_0.5s_ease-in-out]":""}`,style:N?{animation:"shake 0.5s ease-in-out"}:void 0,children:[e.jsx("p",{className:"text-gray-500 text-xs mb-3 uppercase tracking-wider",children:"Что означает это имя?"}),e.jsx("div",{className:"arabic-text text-5xl text-amber-400 mb-4 select-none",children:z.arabic}),e.jsx("div",{className:"text-gray-400 text-sm",children:z.transliteration})]}),e.jsx("div",{className:"grid grid-cols-1 gap-3",children:C.options.map((g,n)=>{let h="glass text-gray-200 hover:t-bg active:scale-[0.97]";return t!==null&&(n===C.correctIndex?h="bg-emerald-500/20 border-emerald-500/50 text-emerald-300 ring-1 ring-emerald-500/30":n===t&&!j?h="bg-red-500/20 border-red-500/50 text-red-300 ring-1 ring-red-500/30":h="glass text-gray-500 opacity-50"),e.jsx("button",{onClick:()=>P(n),disabled:t!==null,className:`p-4 rounded-xl text-left font-medium transition-all duration-300 border border-transparent ${h}`,children:e.jsxs("span",{className:"flex items-center gap-3",children:[e.jsx("span",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm shrink-0 ${t!==null&&n===C.correctIndex?"bg-emerald-500/30 text-emerald-300":t!==null&&n===t&&!j?"bg-red-500/30 text-red-300":"t-bg text-gray-400"}`,children:t!==null&&n===C.correctIndex?e.jsx(Q,{className:"w-4 h-4"}):t!==null&&n===t&&!j?e.jsx($,{className:"w-4 h-4"}):String.fromCharCode(65+n)}),e.jsx("span",{children:g})]})},n)})}),e.jsx("style",{children:`
        @keyframes shake {
          0%, 100% { transform: translateX(0); }
          10%, 50%, 90% { transform: translateX(-4px); }
          30%, 70% { transform: translateX(4px); }
        }
      `})]})}function D({learned:r,onMarkLearned:d,onUnmarkLearned:c}){const[i,u]=l.useState(null),[m,x]=l.useState(""),o=b.filter(s=>{if(!m)return!0;const t=m.toLowerCase();return s.transliteration.toLowerCase().includes(t)||s.russian.toLowerCase().includes(t)||s.arabic.includes(m)||String(s.id).includes(t)}),a=i!==null?b.find(s=>s.id===i):null;return e.jsxs("div",{className:"px-4",children:[e.jsxs("div",{className:"relative mb-4",children:[e.jsx("input",{type:"text",placeholder:"Поиск по имени...",value:m,onChange:s=>x(s.target.value),className:"w-full px-4 py-3 rounded-xl glass bg-transparent text-white placeholder-gray-500 text-sm focus:outline-none focus:ring-1 focus:ring-emerald-500/30"}),m&&e.jsx("button",{onClick:()=>x(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-300",children:e.jsx($,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"flex items-center justify-between mb-4 text-sm",children:[e.jsxs("span",{className:"text-gray-400",children:["Выучено:"," ",e.jsx("span",{className:"text-emerald-400 font-medium",children:r.length})," ","/ 99"]}),e.jsx("span",{className:"text-gray-500",children:o.length!==99&&`Найдено: ${o.length}`})]}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:o.map(s=>{const t=r.includes(s.id);return e.jsxs("button",{onClick:()=>u(s.id),className:`relative p-3 rounded-xl text-center transition-all duration-200 active:scale-95 ${t?"glass border border-emerald-500/30 shadow-sm shadow-emerald-500/10":"glass"}`,children:[t&&e.jsx("div",{className:"absolute top-1.5 right-1.5",children:e.jsx(Q,{className:"w-3 h-3 text-emerald-400"})}),e.jsx("div",{className:"text-gray-500 text-[10px] mb-0.5",children:s.id}),e.jsx("div",{className:"arabic-text text-lg text-amber-400 leading-tight mb-1",children:s.arabic}),e.jsx("div",{className:"text-[10px] text-gray-400 truncate",children:s.transliteration})]},s.id)})}),a&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/70 backdrop-blur-sm animate-fade-in",onClick:()=>u(null),children:e.jsxs("div",{className:"glass-card p-8 w-full max-w-sm relative",onClick:s=>s.stopPropagation(),children:[e.jsx("button",{onClick:()=>u(null),className:"absolute top-4 right-4 w-8 h-8 rounded-full t-bg flex items-center justify-center text-gray-400 hover:text-white",children:e.jsx($,{className:"w-4 h-4"})}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-10 h-10 rounded-full bg-emerald-500/10 text-emerald-400 text-sm font-medium mb-4",children:a.id}),e.jsx("div",{className:"arabic-text text-5xl text-amber-400 mb-4 select-none",children:a.arabic}),e.jsx("div",{className:"text-xl text-white font-semibold mb-2",children:a.transliteration}),e.jsx("div",{className:"text-lg text-emerald-400 mb-4",children:a.russian}),e.jsx("div",{className:"text-gray-400 text-sm leading-relaxed mb-6",children:a.meaning}),r.includes(a.id)?e.jsxs("button",{onClick:()=>{c(a.id)},className:"w-full py-3 rounded-xl bg-emerald-500/20 text-emerald-400 font-medium flex items-center justify-center gap-2 active:scale-95 transition-all",children:[e.jsx(Q,{className:"w-5 h-5"}),"Выучено"]}):e.jsxs("button",{onClick:()=>{d(a.id)},className:"w-full py-3 rounded-xl bg-gradient-to-r from-emerald-600 to-emerald-500 text-white font-medium flex items-center justify-center gap-2 active:scale-95 transition-all shadow-lg shadow-emerald-500/20",children:[e.jsx(E,{className:"w-5 h-5"}),"Выучил"]})]})]})})]})}export{ee as default};
