import{c as q,s as H,P as Q,j as e,R as A,S as W,W as _,H as O,h as B,v as G}from"./index-ClvlpEB5.js";import{u as V,b as r}from"./vendor-CpRrxz-h.js";import{b as h,c as T,S as y}from"./data-content-C6zxCIss.js";import{S as X}from"./ShareCard-C9bB_SuX.js";import{A as Y}from"./arrow-left-83KCBYT8.js";import{S as P}from"./search-DW9giKc2.js";import{S as Z}from"./share-2-UVW990nA.js";const K=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],ee=q("layers",K);function S(){return new Date().toISOString().slice(0,10)}function te(){const a=S();let s=0;for(let i=0;i<a.length;i++)s=s*31+a.charCodeAt(i)|0;const c=Math.abs(s)%h.length;return h[c]}function E(){try{const a=`iman_dua_read_${S()}`,s=localStorage.getItem(a);if(s)return new Set(JSON.parse(s))}catch{}return new Set}function se(a){const s=`iman_dua_read_${S()}`,c=E();c.add(a),localStorage.setItem(s,JSON.stringify([...c]))}function ae(){try{const a=localStorage.getItem("iman_favorite_duas");if(a)return new Set(JSON.parse(a))}catch{}return new Set}function le(a){localStorage.setItem("iman_favorite_duas",JSON.stringify([...a])),B()}function re({visible:a}){return a?e.jsxs("div",{className:"fixed top-1/3 left-1/2 -translate-x-1/2 z-50 pointer-events-none animate-points-float",children:[e.jsxs("div",{className:"flex items-center gap-2 px-5 py-2.5 rounded-2xl bg-emerald-500/20 border border-emerald-500/40 backdrop-blur-md shadow-lg shadow-emerald-500/10",children:[e.jsx("span",{className:"text-xl font-bold text-emerald-400",children:"+3"}),e.jsx("span",{className:"text-lg",children:"üåü"})]}),e.jsx("style",{children:`
        @keyframes points-float-up {
          0% { transform: translate(-50%, 0) scale(0.5); opacity: 0; }
          15% { transform: translate(-50%, -8px) scale(1.15); opacity: 1; }
          70% { transform: translate(-50%, -35px) scale(1); opacity: 1; }
          100% { transform: translate(-50%, -70px) scale(0.8); opacity: 0; }
        }
        .animate-points-float {
          animation: points-float-up 1.4s ease-out forwards;
        }
      `})]}):null}function ne({dua:a,isExpanded:s,isFavorite:c,isReadToday:i,onToggleExpand:g,onToggleFavorite:d,onMarkRead:u,onShare:x}){return e.jsxs("div",{className:`glass-card rounded-2xl transition-all duration-300 overflow-hidden ${s?"ring-1 ring-emerald-500/20 bg-gradient-to-br from-white/[0.07] to-white/[0.02]":"hover:bg-white/[0.04] active:scale-[0.99]"}`,children:[e.jsxs("button",{onClick:g,className:"w-full text-left p-4 flex items-start gap-3",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:`font-['Amiri'] text-right text-lg text-amber-100/80 leading-[2] ${s?"":"line-clamp-1"}`,dir:"rtl",children:a.arabic}),e.jsx("div",{className:"flex items-center gap-2 mt-1.5",children:e.jsxs("span",{className:"text-sm text-slate-300 truncate",children:[a.translation.slice(0,60),"..."]})}),e.jsx("span",{className:"text-[11px] text-slate-500 t-bg px-2 py-0.5 rounded-full inline-block mt-1",children:a.source})]}),e.jsx("div",{className:"flex items-center gap-2 pt-1 shrink-0",children:e.jsx(_,{className:`w-4 h-4 text-slate-500 transition-transform duration-300 ${s?"rotate-180":""}`})})]}),e.jsx("div",{className:`overflow-hidden transition-all duration-300 ease-in-out ${s?"max-h-[800px] opacity-100":"max-h-0 opacity-0"}`,children:e.jsxs("div",{className:"px-4 pb-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"flex-1 h-px bg-gradient-to-r from-transparent via-emerald-500/20 to-transparent"}),e.jsx("div",{className:"w-1 h-1 rounded-full bg-emerald-500/30"}),e.jsx("div",{className:"flex-1 h-px bg-gradient-to-r from-transparent via-emerald-500/20 to-transparent"})]}),e.jsx("p",{className:"font-['Amiri'] text-right text-2xl leading-loose text-white mb-4",dir:"rtl",children:a.arabic}),e.jsx("p",{className:"text-sm text-amber-300/70 italic mb-3 leading-relaxed",children:a.transcription}),e.jsx("p",{className:"text-sm text-slate-300 leading-relaxed mb-3",children:a.translation}),e.jsxs("div",{className:"flex items-center gap-1.5 mb-4",children:[e.jsx(G,{className:"w-3.5 h-3.5 text-slate-500"}),e.jsx("span",{className:"text-[11px] text-slate-500",children:a.source})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:m=>{m.stopPropagation(),u()},disabled:i,className:`flex-1 py-2.5 rounded-xl text-sm font-medium flex items-center justify-center gap-2 transition-all active:scale-[0.97] ${i?"bg-emerald-500/10 text-emerald-400/60 cursor-default":"bg-emerald-500/20 text-emerald-400 hover:bg-emerald-500/30 border border-emerald-500/30"}`,children:i?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-xs",children:"‚úî"}),e.jsx("span",{children:"–ü—Ä–æ—á–∏—Ç–∞–Ω–æ —Å–µ–≥–æ–¥–Ω—è"})]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-xs",children:"üåü"}),e.jsx("span",{children:"–ü—Ä–æ—á–∏—Ç–∞–ª +3"})]})}),e.jsx("button",{onClick:m=>{m.stopPropagation(),x()},className:"w-10 h-10 rounded-xl flex items-center justify-center t-bg hover:t-bg transition-all active:scale-90","aria-label":"–ü–æ–¥–µ–ª–∏—Ç—å—Å—è",children:e.jsx(Z,{className:"w-5 h-5 text-slate-500 hover:text-emerald-400"})}),e.jsx("button",{onClick:d,className:"w-10 h-10 rounded-xl flex items-center justify-center t-bg hover:t-bg transition-all active:scale-90","aria-label":"–í –∏–∑–±—Ä–∞–Ω–Ω–æ–µ",children:e.jsx(O,{className:`w-5 h-5 transition-all duration-300 ${c?"fill-red-500 text-red-500 scale-110":"text-slate-500 hover:text-red-400"}`})})]})]})})]})}function pe(){const a=V(),[s,c]=r.useState("categories"),[i,g]=r.useState(""),[d,u]=r.useState(null),[x,m]=r.useState(null),[F,p]=r.useState(null),[f,k]=r.useState(new Set),[w,C]=r.useState(new Set),[I,D]=r.useState(!1),[b]=r.useState(()=>te()),[j,L]=r.useState(!1),[v,$]=r.useState(null);r.useEffect(()=>{k(ae()),C(E())},[]);const N=h.filter(t=>{if(s==="favorites"&&!f.has(t.id)||s==="situations"&&x&&t.situation!==x||s==="categories"&&d&&t.category!==d)return!1;if(i.trim()){const l=i.toLowerCase();return t.translation.toLowerCase().includes(l)||t.transcription.toLowerCase().includes(l)||t.arabic.includes(i)||t.source.toLowerCase().includes(l)}return!0}),z=r.useCallback((t,l)=>{l.stopPropagation(),k(n=>{const o=new Set(n);return o.has(t)?o.delete(t):o.add(t),le(o),o})},[]),M=r.useCallback(t=>{w.has(t)||(H.addExtraPoints(Q.DUA),se(t),C(l=>new Set(l).add(t)),D(!0),setTimeout(()=>D(!1),1500))},[w]),R=r.useCallback(t=>{u(l=>l===t?null:t),p(null)},[]),J=r.useCallback(t=>{m(l=>l===t?null:t),p(null)},[]),U=r.useCallback(t=>{c(t),u(null),m(null),p(null)},[]);return e.jsxs("div",{className:"min-h-screen pb-28",children:[e.jsx(re,{visible:I}),e.jsxs("div",{className:"flex items-center gap-3 px-4 pt-6 pb-4",children:[e.jsx("button",{onClick:()=>a(-1),className:"w-10 h-10 rounded-xl glass flex items-center justify-center text-slate-400 hover:text-white active:scale-90 transition-all",children:e.jsx(Y,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h1",{className:"text-xl font-bold text-white",children:"–î—É–∞-–∫–æ–ª–ª–µ–∫—Ü–∏—è"}),e.jsxs("p",{className:"text-xs text-emerald-400/70",children:[h.length," –¥—É–∞ –∏–∑ –ö–æ—Ä–∞–Ω–∞ –∏ –°—É–Ω–Ω—ã"]})]})]}),e.jsx("div",{className:"px-4 mb-4",children:e.jsxs("div",{className:"relative",children:[e.jsx(P,{className:"absolute left-3.5 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-500"}),e.jsx("input",{type:"text",placeholder:"–ü–æ–∏—Å–∫ –¥—É–∞...",value:i,onChange:t=>g(t.target.value),className:"w-full pl-10 pr-4 py-3 rounded-xl t-bg border t-border-s text-white placeholder:text-slate-500 text-sm focus:outline-none focus:ring-1 focus:ring-emerald-500/40 focus:border-emerald-500/30 transition-all"}),i&&e.jsx("button",{onClick:()=>g(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-500 hover:text-slate-300 text-xs",children:"‚úï"})]})}),e.jsx("div",{className:"px-4 mb-5",children:e.jsx("div",{className:"flex gap-1 p-1 rounded-xl t-bg border t-border",children:[{key:"categories",label:"–ö–∞—Ç–µ–≥–æ—Ä–∏–∏",icon:ee},{key:"situations",label:"–°–∏—Ç—É–∞—Ü–∏–∏",icon:A},{key:"favorites",label:"–ò–∑–±—Ä–∞–Ω–Ω–æ–µ",icon:W}].map(({key:t,label:l,icon:n})=>e.jsxs("button",{onClick:()=>U(t),className:`flex-1 flex items-center justify-center gap-1.5 py-2.5 rounded-lg text-xs font-medium transition-all ${s===t?"bg-emerald-500/20 text-emerald-400 border border-emerald-500/30":"text-white/40 hover:t-text-s"}`,children:[e.jsx(n,{size:14}),l,t==="favorites"&&f.size>0&&e.jsx("span",{className:"text-[10px] t-bg px-1.5 rounded-full",children:f.size})]},t))})}),s==="categories"&&e.jsx("div",{className:"px-4 mb-6",children:e.jsxs("div",{className:"relative rounded-2xl overflow-hidden cursor-pointer active:scale-[0.98] transition-all duration-200",onClick:()=>L(t=>!t),children:[e.jsx("div",{className:"absolute inset-0 rounded-2xl p-[1.5px] pointer-events-none",children:e.jsx("div",{className:"absolute inset-0 rounded-2xl",style:{background:"linear-gradient(135deg, rgba(245,158,11,0.6), rgba(217,119,6,0.3), rgba(245,158,11,0.6))",mask:"linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0)",maskComposite:"exclude",WebkitMaskComposite:"xor",padding:"1.5px"}})}),e.jsxs("div",{className:"relative glass-card rounded-2xl p-5 border-0",children:[e.jsx("div",{className:"absolute -top-10 -right-10 w-32 h-32 rounded-full bg-amber-500/10 blur-3xl"}),e.jsxs("div",{className:"flex items-center justify-between mb-3 relative",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(A,{className:"w-4 h-4 text-amber-400"}),e.jsx("span",{className:"text-[11px] font-semibold uppercase tracking-widest text-amber-400/90",children:"–î—É–∞ –¥–Ω—è"})]}),e.jsx(_,{className:`w-4 h-4 text-amber-400/60 transition-transform duration-300 ${j?"rotate-180":""}`})]}),e.jsx("p",{className:`font-['Amiri'] text-amber-100/90 text-center leading-[2.2] relative ${j?"text-xl":"text-lg line-clamp-2"}`,dir:"rtl",children:b.arabic}),e.jsxs("div",{className:`overflow-hidden transition-all duration-300 ease-in-out ${j?"max-h-[500px] opacity-100 mt-3":"max-h-0 opacity-0"}`,children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"flex-1 h-px bg-gradient-to-r from-transparent via-amber-500/30 to-transparent"}),e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-amber-500/40"}),e.jsx("div",{className:"flex-1 h-px bg-gradient-to-r from-transparent via-amber-500/30 to-transparent"})]}),e.jsx("p",{className:"text-sm text-amber-300/60 italic mb-3 leading-relaxed",children:b.transcription}),e.jsx("p",{className:"text-sm text-slate-300 leading-relaxed mb-3",children:b.translation}),e.jsx("div",{className:"flex items-center justify-end pt-2 border-t t-border",children:e.jsx("span",{className:"text-[11px] font-medium text-amber-500/70 bg-amber-500/10 px-2.5 py-1 rounded-full",children:b.source})})]}),!j&&e.jsxs("p",{className:"text-xs text-slate-500 text-center mt-2",children:[b.translation.slice(0,80),"..."]})]})]})}),s==="categories"&&e.jsxs("div",{className:"px-4 mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-white mb-3",children:"–ö–∞—Ç–µ–≥–æ—Ä–∏–∏"}),e.jsx("div",{className:"grid grid-cols-3 gap-2.5",children:T.map(t=>{const l=h.filter(o=>o.category===t.key).length,n=d===t.key;return e.jsxs("button",{onClick:()=>R(t.key),className:`relative p-3 rounded-2xl text-center active:scale-[0.95] transition-all duration-200 ${n?"bg-emerald-500/20 border border-emerald-500/50 shadow-lg shadow-emerald-500/10":"t-bg backdrop-blur-sm border t-border-s hover:t-border-s"}`,children:[e.jsx("div",{className:"text-2xl mb-1.5",children:t.icon}),e.jsx("div",{className:`text-xs font-medium mb-0.5 ${n?"text-emerald-300":"text-white"}`,children:t.name}),e.jsxs("div",{className:`text-[10px] ${n?"text-emerald-400/60":"text-slate-500"}`,children:[l," –¥—É–∞"]})]},t.key)})}),d&&e.jsxs("button",{onClick:()=>{u(null),p(null)},className:"mt-2.5 text-xs text-emerald-400/70 hover:text-emerald-400 transition-colors flex items-center gap-1 mx-auto",children:[e.jsx("span",{children:"‚úï"})," –°–±—Ä–æ—Å–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä"]})]}),s==="situations"&&e.jsxs("div",{className:"px-4 mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-white mb-3",children:"–î—É–∞ –ø–æ —Å–∏—Ç—É–∞—Ü–∏—è–º"}),e.jsx("p",{className:"text-xs text-white/40 mb-4",children:"–í—ã–±–µ—Ä–∏—Ç–µ –∂–∏–∑–Ω–µ–Ω–Ω—É—é —Å–∏—Ç—É–∞—Ü–∏—é, —á—Ç–æ–±—ã –Ω–∞–π—Ç–∏ –ø–æ–¥—Ö–æ–¥—è—â–µ–µ –¥—É–∞"}),e.jsx("div",{className:"grid grid-cols-2 gap-2.5",children:(typeof y<"u"?y:[]).map(t=>{const l=h.filter(o=>o.situation===t.key).length,n=x===t.key;return e.jsxs("button",{onClick:()=>J(t.key),className:`relative p-3.5 rounded-2xl text-left active:scale-[0.97] transition-all duration-200 ${n?"bg-violet-500/20 border border-violet-500/50 shadow-lg shadow-violet-500/10":"t-bg backdrop-blur-sm border t-border-s hover:t-border-s"}`,children:[e.jsxs("div",{className:"flex items-center gap-2.5 mb-1.5",children:[e.jsx("span",{className:"text-xl",children:t.icon}),e.jsx("span",{className:`text-sm font-medium ${n?"text-violet-300":"text-white"}`,children:t.name})]}),e.jsx("p",{className:`text-[10px] leading-relaxed ${n?"text-violet-400/60":"text-slate-500"}`,children:t.description}),l>0&&e.jsx("span",{className:`absolute top-2.5 right-2.5 text-[10px] px-1.5 py-0.5 rounded-full ${n?"bg-violet-500/30 text-violet-300":"t-bg text-white/40"}`,children:l})]},t.key)})}),x&&e.jsxs("button",{onClick:()=>{m(null),p(null)},className:"mt-2.5 text-xs text-violet-400/70 hover:text-violet-400 transition-colors flex items-center gap-1 mx-auto",children:[e.jsx("span",{children:"‚úï"})," –°–±—Ä–æ—Å–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä"]})]}),s==="favorites"&&f.size===0&&e.jsx("div",{className:"px-4 mb-6",children:e.jsxs("div",{className:"glass-card p-8 text-center rounded-2xl",children:[e.jsx(O,{className:"w-10 h-10 text-slate-600 mx-auto mb-3"}),e.jsx("p",{className:"text-slate-400 text-sm",children:"–ù–µ—Ç –∏–∑–±—Ä–∞–Ω–Ω—ã—Ö –¥—É–∞"}),e.jsx("p",{className:"text-slate-500 text-xs mt-1",children:"–ù–∞–∂–º–∏—Ç–µ –Ω–∞ —Å–µ—Ä–¥–µ—á–∫–æ, —á—Ç–æ–±—ã –¥–æ–±–∞–≤–∏—Ç—å –¥—É–∞ –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ"})]})}),e.jsxs("div",{className:"px-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h2",{className:"text-lg font-semibold text-white",children:s==="favorites"?"–ò–∑–±—Ä–∞–Ω–Ω—ã–µ –¥—É–∞":s==="situations"?x?(typeof y<"u"?y:[]).find(t=>t.key===x)?.name||"–î—É–∞":"–í—Å–µ —Å–∏—Ç—É–∞—Ü–∏–æ–Ω–Ω—ã–µ –¥—É–∞":d?T.find(t=>t.key===d)?.name||"–î—É–∞":"–í—Å–µ –¥—É–∞"}),e.jsxs("span",{className:"text-xs text-slate-500",children:[N.length," ",s==="favorites"?"":`–∏–∑ ${h.length}`]})]}),N.length===0&&s!=="favorites"?e.jsxs("div",{className:"glass-card p-8 text-center rounded-2xl",children:[e.jsx(P,{className:"w-10 h-10 text-slate-600 mx-auto mb-3"}),e.jsx("p",{className:"text-slate-400 text-sm",children:"–ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ"}),e.jsx("p",{className:"text-slate-500 text-xs mt-1",children:"–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å –∑–∞–ø—Ä–æ—Å –∏–ª–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏—é"})]}):N.length>0?e.jsx("div",{className:"space-y-3",children:N.map((t,l)=>e.jsx("div",{className:"animate-fade-in",style:{animationDelay:`${.04+l*.03}s`,opacity:0},children:e.jsx(ne,{dua:t,isExpanded:F===t.id,isFavorite:f.has(t.id),isReadToday:w.has(t.id),onToggleExpand:()=>p(n=>n===t.id?null:t.id),onToggleFavorite:n=>z(t.id,n),onMarkRead:()=>M(t.id),onShare:()=>$({arabic:t.arabic,text:t.translation,source:t.source})})},t.id))}):null]}),e.jsx("div",{className:"h-8"}),v&&e.jsx(X,{type:"dua",arabic:v.arabic,text:v.text,source:v.source,onClose:()=>$(null)})]})}export{pe as default};
