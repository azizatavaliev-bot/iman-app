import{j as e,C as B,M as w,a as M,S as T,b as H,s as S,g as Q,P as V,h as W}from"./index-NuxdLuKF.js";import{u as X,b}from"./vendor-CpRrxz-h.js";import{C as _}from"./calendar-B3wFpu8J.js";import{S as R}from"./sun-DpWauo3N.js";const Z=42.8746,K=74.5698,h=new Date(2026,1,19),j=new Date(2026,2,20),g=30,$="iman_ramadan_2026",v=[{key:"taraweeh",label:"Таравих намаз",icon:w},{key:"quran_juz",label:"Чтение 1 джуза Корана",icon:T},{key:"sadaqa",label:"Садака",icon:R},{key:"dua_iftar",label:"Дуа перед ифтаром",icon:H}];function ee(){try{const a=localStorage.getItem($);if(a)return JSON.parse(a)}catch{}return{fastingDays:{},goals:{}}}function C(a){localStorage.setItem($,JSON.stringify(a)),W()}function F(a,n){const d=a.replace(/\s*\(.*\)/,"").trim(),[i,p]=d.split(":").map(Number),m=new Date;return new Date(m.getFullYear(),m.getMonth(),m.getDate(),i,p,0)}function te(a){if(a<=0)return"00:00:00";const n=Math.floor(a/3600),d=Math.floor(a%3600/60),i=a%60;return[n,d,i].map(p=>String(p).padStart(2,"0")).join(":")}function se(a){const n=new Date(h.getFullYear(),h.getMonth(),h.getDate()),d=new Date(a.getFullYear(),a.getMonth(),a.getDate()),i=Math.floor((d.getTime()-n.getTime())/(1e3*60*60*24));return i<0||i>=g?0:i+1}function ae(){const a=new Date,n=new Date(a.getFullYear(),a.getMonth(),a.getDate()),d=new Date(h.getFullYear(),h.getMonth(),h.getDate());return Math.floor((d.getTime()-n.getTime())/(1e3*60*60*24))}function re(){const a=new Date,n=new Date(a.getFullYear(),a.getMonth(),a.getDate()),d=new Date(j.getFullYear(),j.getMonth(),j.getDate());return n>d}function le(){const a=new Date,n=new Date(a.getFullYear(),a.getMonth(),a.getDate()),d=new Date(h.getFullYear(),h.getMonth(),h.getDate()),i=new Date(j.getFullYear(),j.getMonth(),j.getDate());return n>=d&&n<=i}function xe(){const a=X(),[n,d]=b.useState(ee),[i,p]=b.useState("--:--"),[m,E]=b.useState("--:--"),[Y,G]=b.useState("--:--:--"),[f,L]=b.useState("iftar"),[O,P]=b.useState(!0),o=se(new Date),x=le(),k=re(),N=ae(),y=Object.values(n.fastingDays).filter(t=>t==="fasted").length;b.useEffect(()=>{let t=!1;async function l(){try{const s=S.getProfile(),r=s.lat??Z,c=s.lng??K,u=await Q(r,c);if(t)return;p(u.Fajr.replace(/\s*\(.*\)/,"").trim()),E(u.Maghrib.replace(/\s*\(.*\)/,"").trim())}catch(s){console.error("Failed to load prayer times:",s)}finally{t||P(!1)}}return l(),()=>{t=!0}},[]),b.useEffect(()=>{if(i==="--:--"||m==="--:--")return;function t(){const s=new Date,r=F(i),c=F(m);let u,D;if(s<r)u=r,D="suhur";else if(s<c)u=c,D="iftar";else{const A=F(i);A.setDate(A.getDate()+1),u=A,D="suhur"}const J=u.getTime()-s.getTime(),z=Math.max(0,Math.floor(J/1e3));G(te(z)),L(D)}t();const l=setInterval(t,1e3);return()=>clearInterval(l)},[i,m]);function I(t){d(l=>{const s={...l,fastingDays:{...l.fastingDays}},r=s.fastingDays[t];return r?r==="fasted"?(s.fastingDays[t]="missed",S.addExtraPoints(-20)):delete s.fastingDays[t]:(s.fastingDays[t]="fasted",S.addExtraPoints(V.FASTING)),C(s),s})}function q(t,l){d(s=>{const r={...s,goals:{...s.goals}};return r.goals[t]||(r.goals[t]={}),r.goals[t]={...r.goals[t]},r.goals[t][l]=!r.goals[t][l],C(r),r})}function U(t){const l=n.fastingDays[t];return l==="fasted"?"bg-emerald-500/30 border-emerald-400/50 text-emerald-300 shadow-[0_0_12px_rgba(16,185,129,0.2)]":l==="missed"?"bg-red-500/25 border-red-400/50 text-red-300":x&&t>o?"t-bg t-border-s t-text-f":"t-bg t-border-s t-text-m hover:t-bg hover:border-white/20"}return e.jsxs("div",{className:"min-h-screen pb-24 px-4 pt-4 max-w-lg mx-auto",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6 animate-fade-in",children:[e.jsx("button",{onClick:()=>a(-1),className:`w-10 h-10 rounded-full glass flex items-center justify-center
                     text-white/70 hover:text-white transition-colors active:scale-95`,children:e.jsx(B,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h1",{className:"text-xl font-bold text-white",children:"Рамадан"}),e.jsx("p",{className:"text-xs text-white/40",children:"Благословенный месяц"})]}),e.jsx(w,{className:"w-6 h-6 text-amber-400/70"})]}),e.jsxs("div",{className:"glass-card p-5 mb-5 relative overflow-hidden animate-fade-in",children:[e.jsx("div",{className:"absolute -top-12 -right-12 w-40 h-40 bg-amber-500/10 rounded-full blur-3xl pointer-events-none"}),e.jsx("div",{className:"absolute -bottom-8 -left-8 w-32 h-32 bg-emerald-500/8 rounded-full blur-3xl pointer-events-none"}),e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-2xl bg-gradient-to-br from-amber-500/20 to-emerald-500/20 border border-amber-400/20 flex items-center justify-center",children:e.jsx(w,{className:"w-6 h-6 text-amber-400",fill:"currentColor"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:"Рамадан 2026"}),e.jsx("p",{className:"text-xs text-white/40",children:"1447 год по Хиджре"})]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs t-text-m mb-4",children:[e.jsx(_,{className:"w-3.5 h-3.5 text-emerald-400/60"}),e.jsx("span",{children:"19 февраля — 20 марта 2026"})]}),e.jsxs("div",{className:"flex items-center justify-center",children:[!x&&!k&&N>0&&e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm t-text-s mb-1",children:"До Рамадана осталось"}),e.jsx("p",{className:"text-4xl font-bold text-amber-400",children:N}),e.jsx("p",{className:"text-xs text-white/40 mt-1",children:N===1?"день":N>=2&&N<=4?"дня":"дней"})]}),x&&e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm t-text-s mb-1",children:"Сейчас идёт"}),e.jsxs("p",{className:"text-3xl font-bold text-emerald-400",children:["День ",o," ",e.jsxs("span",{className:"t-text-f text-lg font-normal",children:["из ",g]})]}),e.jsx("div",{className:"mt-3 w-full h-2 t-bg rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full rounded-full transition-all duration-700 ease-out",style:{width:`${o/g*100}%`,background:"linear-gradient(90deg, #10b981, #f59e0b)",boxShadow:"0 0 12px rgba(16,185,129,0.4)"}})})]}),k&&e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-lg font-semibold text-amber-400",children:"Рамадан 1447 завершён"}),e.jsx("p",{className:"text-xs text-white/40 mt-1",children:"Да примет Аллах наши поклонения"})]})]})]})]}),e.jsxs("div",{className:"glass-card p-5 mb-5 relative overflow-hidden animate-fade-in",style:{animationDelay:"80ms"},children:[e.jsx("div",{className:`absolute -top-10 -right-10 w-44 h-44 rounded-full blur-3xl pointer-events-none ${f==="iftar"?"bg-amber-500/12":"bg-emerald-500/12"}`}),e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center ${f==="iftar"?"bg-amber-500/20 border border-amber-400/20":"bg-emerald-500/20 border border-emerald-400/20"}`,children:f==="iftar"?e.jsx(R,{className:"w-5 h-5 text-amber-400"}):e.jsx(w,{className:"w-5 h-5 text-emerald-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:`text-xs font-medium uppercase tracking-widest ${f==="iftar"?"text-amber-400/70":"text-emerald-400/70"}`,children:f==="iftar"?"До ифтара":"До сухура"}),e.jsx("p",{className:"text-[11px] t-text-f",children:f==="iftar"?`Магриб: ${m}`:`Фаджр: ${i}`})]})]}),O?e.jsx("div",{className:"flex items-center justify-center py-4",children:e.jsx("div",{className:"w-6 h-6 border-2 border-emerald-400 border-t-transparent rounded-full animate-spin"})}):e.jsx("div",{className:"text-center",children:e.jsx("p",{className:`text-5xl font-mono font-bold tabular-nums tracking-tight ${f==="iftar"?"text-amber-400":"text-emerald-400"}`,style:{textShadow:f==="iftar"?"0 0 30px rgba(245,158,11,0.3)":"0 0 30px rgba(16,185,129,0.3)"},children:Y})}),e.jsxs("div",{className:"flex justify-between mt-4 pt-4 border-t t-border",children:[e.jsxs("div",{className:"text-center flex-1",children:[e.jsx("p",{className:"text-[10px] t-text-f uppercase tracking-wider mb-1",children:"Сухур"}),e.jsx("p",{className:"text-sm font-semibold text-emerald-400 font-mono",children:i})]}),e.jsx("div",{className:"w-px t-bg"}),e.jsxs("div",{className:"text-center flex-1",children:[e.jsx("p",{className:"text-[10px] t-text-f uppercase tracking-wider mb-1",children:"Ифтар"}),e.jsx("p",{className:"text-sm font-semibold text-amber-400 font-mono",children:m})]})]})]})]}),e.jsxs("div",{className:"glass-card p-5 mb-5 animate-fade-in",style:{animationDelay:"160ms"},children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(_,{className:"w-4 h-4 text-emerald-400/70"}),e.jsx("h3",{className:"text-sm font-semibold text-white",children:"Трекер поста"})]}),e.jsxs("div",{className:"flex items-center gap-1.5 px-2.5 py-1 rounded-full bg-emerald-500/15 border border-emerald-500/30",children:[e.jsx(M,{className:"w-3 h-3 text-emerald-400"}),e.jsxs("span",{className:"text-xs font-medium text-emerald-300",children:[y,"/",g]})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("div",{className:"h-2 t-bg rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full rounded-full transition-all duration-700 ease-out",style:{width:`${y/g*100}%`,background:"linear-gradient(90deg, #10b981, #34d399)",boxShadow:"0 0 12px rgba(16,185,129,0.3)"}})}),e.jsxs("p",{className:"text-[10px] t-text-f mt-1.5 text-center",children:[y," из ",g," дней поста"]})]}),e.jsx("div",{className:"grid grid-cols-6 gap-2",children:Array.from({length:g},(t,l)=>{const s=l+1,r=n.fastingDays[s],c=x&&s>o;return e.jsxs("button",{onClick:()=>{(!c||!x)&&I(s)},disabled:c&&x,className:`relative aspect-square rounded-xl border text-xs font-bold
                  flex flex-col items-center justify-center gap-0.5
                  transition-all duration-200 active:scale-90
                  ${U(s)}
                  ${s===o&&x?"ring-2 ring-amber-400/40 ring-offset-1 ring-offset-transparent":""}
                `,children:[e.jsx("span",{className:"text-[10px] opacity-60",children:s}),r==="fasted"&&e.jsx(M,{className:"w-3 h-3 text-emerald-400"}),r==="missed"&&e.jsx("span",{className:"text-red-400 text-[10px]",children:"x"})]},s)})}),e.jsxs("div",{className:"flex items-center justify-center gap-4 mt-4 pt-3 border-t t-border",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-emerald-500/60"}),e.jsx("span",{className:"text-[10px] t-text-f",children:"Постился"})]}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-red-500/60"}),e.jsx("span",{className:"text-[10px] t-text-f",children:"Пропущено"})]}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-white/15"}),e.jsx("span",{className:"text-[10px] t-text-f",children:"Будущее"})]})]})]}),e.jsxs("div",{className:"glass-card p-5 mb-5 relative overflow-hidden animate-fade-in",style:{animationDelay:"240ms"},children:[e.jsx("div",{className:"absolute -top-10 -left-10 w-36 h-36 bg-emerald-500/10 rounded-full blur-3xl pointer-events-none"}),e.jsx("div",{className:"absolute -bottom-8 -right-8 w-28 h-28 bg-emerald-500/8 rounded-full blur-3xl pointer-events-none"}),e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("div",{className:"w-9 h-9 rounded-xl bg-emerald-500/20 border border-emerald-400/20 flex items-center justify-center",children:e.jsx(w,{className:"w-4 h-4 text-emerald-400",fill:"currentColor"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-white",children:"Дуа для сухура"}),e.jsx("p",{className:"text-[10px] t-text-f",children:"Намерение перед рассветом"})]})]}),e.jsx("div",{className:"t-bg rounded-2xl p-4 mb-3 border t-border",children:e.jsx("p",{className:"text-xl text-white/90 leading-loose text-center",style:{fontFamily:"'Amiri', 'Noto Naskh Arabic', serif"},dir:"rtl",children:"نَوَيْتُ صَوْمَ غَدٍ عَنْ أَدَاءِ فَرْضِ شَهْرِ رَمَضَانَ هَذِهِ السَّنَةِ لِلَّهِ تَعَالَى"})}),e.jsxs("div",{className:"mb-3",children:[e.jsx("p",{className:"text-[10px] text-emerald-400/60 uppercase tracking-wider mb-1",children:"Произношение"}),e.jsx("p",{className:"text-sm text-white/70 leading-relaxed italic",children:"Навайту саума гадин 'ан ада'и фарды шахри Рамадана хазихис-санати лилляхи та'аля"})]}),e.jsxs("div",{className:"pt-3 border-t t-border",children:[e.jsx("p",{className:"text-[10px] text-emerald-400/60 uppercase tracking-wider mb-1",children:"Перевод"}),e.jsx("p",{className:"text-sm t-text-s leading-relaxed",children:"Я намереваюсь держать пост завтрашнего дня во исполнение обязательного поста месяца Рамадан в этом году ради Аллаха"})]})]})]}),e.jsxs("div",{className:"glass-card p-5 mb-5 relative overflow-hidden animate-fade-in",style:{animationDelay:"280ms"},children:[e.jsx("div",{className:"absolute -top-10 -left-10 w-36 h-36 bg-amber-500/10 rounded-full blur-3xl pointer-events-none"}),e.jsx("div",{className:"absolute -bottom-8 -right-8 w-28 h-28 bg-amber-500/8 rounded-full blur-3xl pointer-events-none"}),e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("div",{className:"w-9 h-9 rounded-xl bg-amber-500/20 border border-amber-400/20 flex items-center justify-center",children:e.jsx(T,{className:"w-4 h-4 text-amber-400",fill:"currentColor"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-white",children:"Дуа для разговения"}),e.jsx("p",{className:"text-[10px] t-text-f",children:"Читается при ифтаре"})]})]}),e.jsx("div",{className:"t-bg rounded-2xl p-4 mb-3 border t-border",children:e.jsx("p",{className:"text-xl text-white/90 leading-loose text-center",style:{fontFamily:"'Amiri', 'Noto Naskh Arabic', serif"},dir:"rtl",children:"اللَّهُمَّ لَكَ صُمْتُ وَعَلَى رِزْقِكَ أَفْطَرْتُ"})}),e.jsxs("div",{className:"mb-3",children:[e.jsx("p",{className:"text-[10px] text-amber-400/60 uppercase tracking-wider mb-1",children:"Произношение"}),e.jsx("p",{className:"text-sm text-white/70 leading-relaxed italic",children:"Аллахумма ляка сумту ва 'аля ризкыка афтарту"})]}),e.jsxs("div",{className:"pt-3 border-t t-border",children:[e.jsx("p",{className:"text-[10px] text-amber-400/60 uppercase tracking-wider mb-1",children:"Перевод"}),e.jsx("p",{className:"text-sm t-text-s leading-relaxed",children:"О Аллах! Ради Тебя я постился и Твоим пропитанием разговляюсь"})]})]})]}),e.jsxs("div",{className:"glass-card p-5 animate-fade-in",style:{animationDelay:"360ms"},children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(T,{className:"w-4 h-4 text-amber-400/70"}),e.jsx("h3",{className:"text-sm font-semibold text-white",children:"Цели на Рамадан"})]}),x&&o>0&&e.jsxs("span",{className:"text-[10px] t-text-f",children:["День ",o]})]}),e.jsx("p",{className:"text-xs text-white/40 mb-4",children:"Ежедневный чек-лист ибадата в Рамадан"}),e.jsx("div",{className:"space-y-2.5",children:v.map(({key:t,label:l,icon:s})=>{const r=x&&o>0?o:1,c=n.goals[t]?.[r]??!1;return e.jsxs("button",{onClick:()=>q(t,r),className:`w-full flex items-center gap-3 p-3 rounded-xl border transition-all duration-200 active:scale-[0.98]
                  ${c?"bg-emerald-500/15 border-emerald-500/30":"t-bg t-border-s hover:t-bg hover:t-border-s"}`,children:[e.jsx("div",{className:`w-7 h-7 rounded-lg border-2 flex items-center justify-center transition-all duration-200
                    ${c?"bg-emerald-500 border-emerald-400 shadow-[0_0_12px_rgba(16,185,129,0.3)]":"border-white/20 t-bg"}`,children:c&&e.jsx(M,{className:"w-4 h-4 text-white"})}),e.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center ${c?"bg-emerald-500/20":"t-bg"}`,children:e.jsx(s,{className:`w-4 h-4 ${c?"text-emerald-400":"text-white/40"}`})}),e.jsx("span",{className:`text-sm font-medium flex-1 text-left ${c?"text-emerald-300 line-through decoration-emerald-500/40":"text-white/70"}`,children:l})]},t)})}),(()=>{const t=x&&o>0?o:1,l=v.filter(({key:s})=>n.goals[s]?.[t]).length;return e.jsxs("div",{className:"mt-4 pt-3 border-t t-border text-center",children:[e.jsxs("p",{className:"text-xs t-text-f",children:["Выполнено"," ",e.jsxs("span",{className:l===v.length?"text-emerald-400":"text-amber-400",children:[l,"/",v.length]})," ","целей сегодня"]}),l===v.length&&e.jsx("p",{className:"text-xs text-emerald-400/70 mt-1 animate-pulse",children:"Машаллах! Все цели выполнены"})]})})()]})]})}export{xe as default};
