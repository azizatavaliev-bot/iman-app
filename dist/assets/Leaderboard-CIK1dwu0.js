import{c as L,J as P,s as m,j as e,C as S,N as h,a0 as _}from"./index-Cln3HTWx.js";import{u as R,b as l}from"./vendor-CpRrxz-h.js";import{R as M}from"./refresh-cw-Dlq3NqDq.js";import{A as q}from"./award-CCoGt2bG.js";const z=[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]],g=L("medal",z);function $(){const N=R(),[n,c]=l.useState([]),[d,u]=l.useState(!0),[f,b]=l.useState(!1),[o,v]=l.useState(0),[y,w]=l.useState(0),p=P(),r=p?.id,i=l.useCallback(async(s=!1)=>{try{s&&b(!0);const a=await fetch("/api/leaderboard");if(a.ok){const t=await a.json();c(t.users||[]),v(t.totalUsers||0),w(t.totalSubscribers||0)}else{const t=m.getProfile(),x={telegram_id:r||0,name:t.name||"–í—ã",totalPoints:t.totalPoints||0,level:t.level||"–ù–æ–≤–∏—á–æ–∫",streak:t.streak||0,rank:1};c([x])}}catch(a){console.error("Leaderboard fetch error:",a);const t=m.getProfile(),x={telegram_id:r||0,name:t.name||"–í—ã",totalPoints:t.totalPoints||0,level:t.level||"–ù–æ–≤–∏—á–æ–∫",streak:t.streak||0,rank:1};c([x])}finally{u(!1),b(!1)}},[r]);l.useEffect(()=>{i()},[i]);const k=n.find(s=>s.telegram_id===r);function U(s){return s===1?e.jsx(h,{className:"w-6 h-6 text-yellow-400"}):s===2?e.jsx(g,{className:"w-6 h-6 text-gray-300"}):s===3?e.jsx(g,{className:"w-6 h-6 text-amber-600"}):e.jsxs("div",{className:"w-6 h-6 flex items-center justify-center text-sm font-bold text-slate-400",children:["#",s]})}function C(s){return s===1?"from-yellow-500/20 to-amber-500/20 border-yellow-500/30":s===2?"from-gray-400/20 to-slate-400/20 border-gray-400/30":s===3?"from-amber-600/20 to-orange-600/20 border-amber-600/30":"from-slate-700/20 to-slate-800/20 border-slate-600/30"}function j(s,a){return e.jsx("div",{className:`
          glass rounded-xl p-4 border transition-all
          ${a?"ring-2 ring-emerald-400/50 scale-[1.02]":""}
        `,style:{borderColor:a?"var(--emerald-400)":"var(--border-secondary)"},children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex-shrink-0",children:U(s.rank)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"flex items-baseline gap-2",children:e.jsxs("p",{className:"font-semibold text-white truncate",children:[s.name,a&&e.jsx("span",{className:"ml-2 text-xs text-emerald-400",children:"(–í—ã)"})]})}),e.jsxs("div",{className:"flex items-center gap-3 mt-1",children:[e.jsx("p",{className:"text-xs text-slate-400",children:s.level}),s.streak>0&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-xs",children:"üî•"}),e.jsxs("span",{className:"text-xs text-orange-400",children:[s.streak," –¥–Ω"]})]})]})]}),e.jsxs("div",{className:`
              px-3 py-2 rounded-xl border bg-gradient-to-br
              ${C(s.rank)}
            `,children:[e.jsx("p",{className:"text-lg font-bold text-white",children:s.totalPoints.toLocaleString()}),e.jsx("p",{className:"text-[10px] text-slate-400",children:"–±–∞–ª–ª–æ–≤"})]})]})},s.telegram_id)}return e.jsxs("div",{className:"min-h-screen",style:{background:"linear-gradient(to bottom, var(--bg-primary), var(--bg-secondary))"},children:[e.jsx("div",{className:"sticky top-0 z-40 glass px-4 py-3 mb-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>N(-1),className:"p-2 rounded-xl hover:bg-white/[0.05] active:scale-95 transition-all",children:e.jsx(S,{className:"w-5 h-5",style:{color:"var(--text)"}})}),e.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[e.jsx(h,{className:"w-6 h-6 text-yellow-400"}),e.jsx("h1",{className:"text-xl font-bold",style:{color:"var(--text)"},children:"–¢–∞–±–ª–∏—Ü–∞ –ª–∏–¥–µ—Ä–æ–≤"})]}),e.jsx("button",{onClick:()=>i(!0),disabled:f,className:"p-2 rounded-xl hover:bg-white/[0.05] active:scale-95 transition-all disabled:opacity-50",children:e.jsx(M,{className:`w-5 h-5 text-emerald-400 ${f?"animate-spin":""}`})})]})}),e.jsxs("div",{className:"max-w-lg mx-auto px-4 pb-24",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[e.jsx("div",{className:"glass rounded-2xl p-4 border",style:{borderColor:"var(--border-secondary)"},children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-emerald-500/20 to-teal-500/20 flex items-center justify-center",children:e.jsx(_,{className:"w-5 h-5 text-emerald-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xl font-bold text-white",children:o}),e.jsx("p",{className:"text-[10px] text-slate-400",children:"–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π"})]})]})}),e.jsx("div",{className:"glass rounded-2xl p-4 border",style:{borderColor:"var(--border-secondary)"},children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-emerald-500/20 to-teal-500/20 flex items-center justify-center",children:e.jsx(q,{className:"w-5 h-5 text-emerald-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xl font-bold text-white",children:y}),e.jsx("p",{className:"text-[10px] text-slate-400",children:"–ü–æ–¥–ø–∏—Å—á–∏–∫–æ–≤"})]})]})})]}),d&&e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"w-8 h-8 border-2 border-emerald-400 border-t-transparent rounded-full animate-spin"})}),!d&&n.length>0&&e.jsxs("div",{className:"space-y-2",children:[n.map(s=>{const a=s.telegram_id===r;return j(s,a)}),r&&!k&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-3 py-2",children:[e.jsx("div",{className:"flex-1 border-t border-dashed border-slate-600/50"}),e.jsx("span",{className:"text-xs text-slate-500",children:"–í–∞—à–∞ –ø–æ–∑–∏—Ü–∏—è"}),e.jsx("div",{className:"flex-1 border-t border-dashed border-slate-600/50"})]}),(()=>{const s=m.getProfile(),a={telegram_id:r,name:s.name||p?.first_name||"–í—ã",totalPoints:s.totalPoints||0,level:s.level||"–ù–æ–≤–∏—á–æ–∫",streak:s.streak||0,rank:o>0?o:n.length+1};return j(a,!0)})()]})]}),!d&&n.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(h,{className:"w-16 h-16 text-slate-600 mx-auto mb-4"}),e.jsx("p",{className:"text-slate-400",children:"–ü–æ–∫–∞ –Ω–µ—Ç –¥–∞–Ω–Ω—ã—Ö"})]}),e.jsx("div",{className:"mt-6 glass rounded-xl p-4 border",style:{borderColor:"var(--border-secondary)"},children:e.jsx("p",{className:"text-xs text-slate-400 text-center",children:"üí° –ó–∞—Ä–∞–±–∞—Ç—ã–≤–∞–π—Ç–µ –±–∞–ª–ª—ã –≤—ã–ø–æ–ª–Ω—è—è –Ω–∞–º–∞–∑—ã, —á–∏—Ç–∞—è –ö–æ—Ä–∞–Ω, –ø—Ä–æ—Ö–æ–¥—è –≤–∏–∫—Ç–æ—Ä–∏–Ω—ã –∏ –≤—ã–ø–æ–ª–Ω—è—è –ø—Ä–∏–≤—ã—á–∫–∏"})})]})]})}export{$ as default};
