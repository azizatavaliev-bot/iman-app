import{c as N,s as g,P as x,v as w,M as v,H as D,j as e,C as L}from"./index-Cln3HTWx.js";import{u as $,b as p}from"./vendor-CpRrxz-h.js";import{S as C}from"./sun-CEDE04hu.js";const H=[["path",{d:"M11 14h2a2 2 0 0 0 0-4h-3c-.6 0-1.1.2-1.4.6L3 16",key:"1v1a37"}],["path",{d:"m14.45 13.39 5.05-4.694C20.196 8 21 6.85 21 5.75a2.75 2.75 0 0 0-4.797-1.837.276.276 0 0 1-.406 0A2.75 2.75 0 0 0 11 5.75c0 1.2.802 2.248 1.5 2.946L16 11.95",key:"fhfbnt"}],["path",{d:"m2 15 6 6",key:"10dquu"}],["path",{d:"m7 20 1.6-1.4c.3-.4.8-.6 1.4-.6h4c1.1 0 2.1-.4 2.8-1.2l4.6-4.4a1 1 0 0 0-2.75-2.91",key:"1x6kdw"}]],_=N("hand-heart",H);const S=[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"j28e5"}]],A=N("utensils",S),u=[{key:"quran",label:"–ß—Ç–µ–Ω–∏–µ –ö–æ—Ä–∞–Ω–∞",emoji:"üìñ",icon:w,points:x.QURAN,color:"text-sky-400",bgColor:"bg-sky-400/10"},{key:"azkar_morning",label:"–£—Ç—Ä–µ–Ω–Ω–∏–µ –∞–∑–∫–∞—Ä—ã",emoji:"ü§≤",icon:C,points:x.AZKAR,color:"text-amber-400",bgColor:"bg-amber-400/10"},{key:"azkar_evening",label:"–í–µ—á–µ—Ä–Ω–∏–µ –∞–∑–∫–∞—Ä—ã",emoji:"üåô",icon:v,points:x.AZKAR,color:"text-indigo-400",bgColor:"bg-indigo-400/10"},{key:"charity",label:"–°–∞–¥–∞–∫–∞",emoji:"üí∞",icon:D,points:x.CHARITY,color:"text-rose-400",bgColor:"bg-rose-400/10"},{key:"fasting",label:"–ü–æ—Å—Ç",emoji:"üïå",icon:A,points:x.FASTING,color:"text-emerald-400",bgColor:"bg-emerald-400/10"},{key:"dua",label:"–î—É–∞",emoji:"üìø",icon:_,points:x.AZKAR,color:"text-purple-400",bgColor:"bg-purple-400/10"}],y=["–ü–Ω","–í—Ç","–°—Ä","–ß—Ç","–ü—Ç","–°–±","–í—Å"];function h(s){return s.toISOString().slice(0,10)}function T(s){return s.toLocaleDateString("ru-RU",{weekday:"long",day:"numeric",month:"long"})}function R(){const s=new Date,a=s.getDay(),o=a===0?6:a-1,t=new Date(s);t.setDate(s.getDate()-o);const n=[];for(let i=0;i<7;i++){const c=new Date(t);c.setDate(t.getDate()+i),n.push(c)}return n}function M(s){const a=new Date;let o=0;for(let t=0;t<365;t++){const n=new Date(a);if(n.setDate(n.getDate()-t),g.getHabitLog(n)[s])o++;else{if(t===0)continue;break}}return o}function W({checked:s,onChange:a}){return e.jsx("button",{role:"switch","aria-checked":s,onClick:()=>a(!s),className:`
        relative inline-flex h-7 w-12 shrink-0 cursor-pointer rounded-full
        border-2 border-transparent transition-colors duration-300 ease-in-out
        focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-emerald-400/50
        ${s?"bg-emerald-500 shadow-[0_0_12px_rgba(16,185,129,0.4)]":"t-bg"}
      `,children:e.jsx("span",{className:`
          pointer-events-none inline-block h-[22px] w-[22px] rounded-full
          bg-white shadow-lg ring-0 transition-transform duration-300 ease-in-out
          ${s?"translate-x-[22px]":"translate-x-0.5"}
        `,style:{marginTop:"1px"}})})}function E({completed:s,total:a,size:o=130}){const n=(o-10)/2,i=2*Math.PI*n,c=a>0?s/a:0,m=i*(1-c),l=s===a&&a>0;return e.jsxs("div",{className:"relative",style:{width:o,height:o},children:[e.jsxs("svg",{width:o,height:o,className:"-rotate-90",children:[e.jsx("circle",{cx:o/2,cy:o/2,r:n,fill:"none",stroke:"rgba(255,255,255,0.06)",strokeWidth:10}),e.jsx("circle",{cx:o/2,cy:o/2,r:n,fill:"none",stroke:"#10b981",strokeWidth:10,strokeLinecap:"round",strokeDasharray:i,strokeDashoffset:m,className:"transition-all duration-700 ease-out",style:{filter:l?"drop-shadow(0 0 10px rgba(16,185,129,0.6))":"drop-shadow(0 0 6px rgba(16,185,129,0.3))"}})]}),e.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[e.jsxs("span",{className:`text-3xl font-bold ${l?"text-emerald-400":"text-white"}`,children:[s,"/",a]}),e.jsx("span",{className:"text-[10px] text-white/40 uppercase tracking-widest mt-1",children:"–ø—Ä–∏–≤—ã—á–µ–∫"}),l&&e.jsx("span",{className:"text-xs text-emerald-400/80 mt-1 animate-pulse",children:"–û—Ç–ª–∏—á–Ω–æ!"})]})]})}function I({points:s,habitKey:a}){return e.jsxs("span",{className:`
        inline-block ml-2 text-sm font-bold text-emerald-400
        animate-bounce-up
      `,children:["+",s]},`${a}-${Date.now()}`)}function K({weekDates:s}){const a=h(new Date),o=s.map(t=>g.getHabitLog(t));return e.jsxs("div",{className:"glass-card p-5",children:[e.jsx("h3",{className:"text-sm font-semibold text-white/70 uppercase tracking-widest mb-4",children:"–ù–µ–¥–µ–ª—è"}),e.jsxs("div",{className:"grid grid-cols-7 gap-1.5",children:[y.map((t,n)=>e.jsx("div",{className:`text-center text-[10px] font-medium mb-1 ${h(s[n])===a?"text-emerald-400":"t-text-f"}`,children:t},t)),u.map(t=>s.map((n,i)=>{const m=o[i][t.key],l=h(n)>a,b=h(n)===a;return e.jsx("div",{title:`${t.label} - ${y[i]}`,className:`
                  h-5 rounded-sm transition-all duration-300
                  ${l?"bg-white/[0.02]":m?"bg-emerald-500/70 shadow-[0_0_4px_rgba(16,185,129,0.3)]":"bg-white/[0.06]"}
                  ${b&&!m&&!l?"ring-1 ring-emerald-500/30":""}
                `},`${t.key}-${i}`)}))]}),e.jsxs("div",{className:"flex items-center gap-4 mt-4 justify-center",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("div",{className:"w-3 h-3 rounded-sm bg-white/[0.06]"}),e.jsx("span",{className:"text-[10px] t-text-f",children:"–ù–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ"})]}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("div",{className:"w-3 h-3 rounded-sm bg-emerald-500/70"}),e.jsx("span",{className:"text-[10px] t-text-f",children:"–í—ã–ø–æ–ª–Ω–µ–Ω–æ"})]})]})]})}function P(){const s=u.map(a=>({...a,streak:M(a.key)}));return e.jsxs("div",{className:"glass-card p-5",children:[e.jsx("h3",{className:"text-sm font-semibold text-white/70 uppercase tracking-widest mb-4",children:"–°–µ—Ä–∏–∏ –¥–Ω–µ–π"}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:s.map(({key:a,label:o,emoji:t,streak:n,color:i})=>e.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-xl bg-white/[0.03] border border-white/[0.04]",children:[e.jsx("span",{className:"text-lg",children:t}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs t-text-m truncate",children:o}),e.jsxs("p",{className:`text-lg font-bold ${n>0?i:"text-white/20"}`,children:[n,e.jsx("span",{className:"text-[10px] t-text-f font-normal ml-1",children:n===1?"–¥–µ–Ω—å":n>=2&&n<=4?"–¥–Ω—è":"–¥–Ω–µ–π"})]})]}),n>=7&&e.jsx("span",{className:"text-amber-400 animate-pulse",title:"–°–µ—Ä–∏—è 7+ –¥–Ω–µ–π!",children:"üî•"})]},a))})]})}function Z(){const s=$(),a=new Date,o=h(a),[t,n]=p.useState(g.getHabitLog(o)),[i,c]=p.useState(null),[m]=p.useState(R),l=u.filter(r=>t[r.key]).length,b=p.useCallback(r=>{const f=!t[r.key],d={quran:t.quran,azkar_morning:t.azkar_morning,azkar_evening:t.azkar_evening,charity:t.charity,fasting:t.fasting,dua:t.dua,[r.key]:f},j=g.setHabitLog(o,d);n(j),g.recalculateTotalPoints(),f&&(c({key:r.key,points:r.points}),setTimeout(()=>{c(k=>k&&k.key===r.key?null:k)},1200))},[t,o]);return p.useEffect(()=>{function r(){n(g.getHabitLog(o))}return window.addEventListener("focus",r),()=>window.removeEventListener("focus",r)},[o]),e.jsxs("div",{className:"min-h-screen pb-8 px-4 pt-6 max-w-lg mx-auto space-y-5 animate-fade-in",children:[e.jsxs("header",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>s(-1),className:"glass-card p-2 hover:scale-105 active:scale-95 transition-transform",children:e.jsx(L,{size:20,className:"text-white/70"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-white",children:"–¢—Ä–µ–∫–µ—Ä –ø—Ä–∏–≤—ã—á–µ–∫"}),e.jsx("p",{className:"text-xs text-white/40 capitalize mt-0.5",children:T(a)})]})]}),e.jsxs("div",{className:"glass-card p-6 flex flex-col items-center relative overflow-hidden",children:[l===u.length&&e.jsx("div",{className:"absolute inset-0 bg-emerald-500/[0.04] pointer-events-none"}),e.jsx("div",{className:"absolute -top-16 -right-16 w-48 h-48 bg-emerald-500/[0.06] rounded-full blur-3xl pointer-events-none"}),e.jsx(E,{completed:l,total:u.length})]}),e.jsx("div",{className:"space-y-3",children:u.map(r=>{const f=r.icon,d=t[r.key],j=i?.key===r.key;return e.jsxs("div",{className:`
                glass-card p-4 flex items-center gap-4 transition-all duration-300
                ${d?"ring-1 ring-emerald-500/20 bg-emerald-500/[0.04]":""}
              `,children:[e.jsx("div",{className:`
                  w-11 h-11 rounded-xl flex items-center justify-center shrink-0
                  transition-all duration-300
                  ${d?"bg-emerald-500/15":r.bgColor}
                `,children:e.jsx(f,{size:20,className:`transition-colors duration-300 ${d?"text-emerald-400":r.color}`})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("p",{className:`text-sm font-medium transition-colors duration-300 ${d?"text-emerald-300":"text-white/90"}`,children:[r.emoji," ",r.label]}),j&&e.jsx(I,{points:r.points,habitKey:r.key})]}),e.jsxs("p",{className:"text-[11px] t-text-f mt-0.5",children:["+",r.points," –æ—á–∫–æ–≤"]})]}),e.jsx(W,{checked:d,onChange:()=>b(r)})]},r.key)})}),e.jsx(K,{weekDates:m}),e.jsx(P,{}),e.jsx("style",{children:`
        @keyframes bounce-up {
          0% {
            opacity: 0;
            transform: translateY(8px) scale(0.8);
          }
          40% {
            opacity: 1;
            transform: translateY(-4px) scale(1.1);
          }
          60% {
            transform: translateY(0) scale(1);
          }
          100% {
            opacity: 0;
            transform: translateY(-12px) scale(0.9);
          }
        }
        .animate-bounce-up {
          animation: bounce-up 1.2s ease-out forwards;
        }
      `})]})}export{Z as default};
