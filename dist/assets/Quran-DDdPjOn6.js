import{c as Z,u as Ve,s as S,j as e,C as Ye,L as k,d as _,e as H,V as G,f as be,B as Ke,h as X,i as He,k as Ge,l as Xe,P as We,m as pe,n as Ze,X as W,o as es,a as ge,p as ss}from"./index-Cln3HTWx.js";import{b as n}from"./vendor-CpRrxz-h.js";import{h as ts,g as as}from"./data-content-C6zxCIss.js";import{h as rs,g as ls}from"./quran-transliteration-Bt2Wc7vP.js";import{S as ns}from"./square-CRIWXBnC.js";import{T as is}from"./trash-2-C8DM5ISk.js";import{S as Ne}from"./search-BSl30xWL.js";const cs=[["path",{d:"M12 7v6",key:"lw1j43"}],["path",{d:"M15 10H9",key:"o6yqo3"}],["path",{d:"M17 3a2 2 0 0 1 2 2v15a1 1 0 0 1-1.496.868l-4.512-2.578a2 2 0 0 0-1.984 0l-4.512 2.578A1 1 0 0 1 5 20V5a2 2 0 0 1 2-2z",key:"oz39mx"}]],je=Z("bookmark-plus",cs);const os=[["path",{d:"m11 7.601-5.994 8.19a1 1 0 0 0 .1 1.298l.817.818a1 1 0 0 0 1.314.087L15.09 12",key:"80a601"}],["path",{d:"M16.5 21.174C15.5 20.5 14.372 20 13 20c-2.058 0-3.928 2.356-6 2-2.072-.356-2.775-3.369-1.5-4.5",key:"j0ngtp"}],["circle",{cx:"16",cy:"7",r:"5",key:"d08jfb"}]],ye=Z("mic-vocal",os);const ds=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],ve=Z("pen-line",ds),g={1:"Открывающая",2:"Корова",3:"Семейство Имрана",4:"Женщины",5:"Трапеза",6:"Скот",7:"Преграды",8:"Трофеи",9:"Покаяние",10:"Юнус",11:"Худ",12:"Юсуф",13:"Гром",14:"Ибрахим",15:"Аль-Хиджр",16:"Пчёлы",17:"Ночной перенос",18:"Пещера",19:"Марьям",20:"Та Ха",21:"Пророки",22:"Хадж",23:"Верующие",24:"Свет",25:"Различение",26:"Поэты",27:"Муравьи",28:"Рассказ",29:"Паук",30:"Римляне",31:"Лукман",32:"Поклон",33:"Союзники",34:"Саба",35:"Творец",36:"Йа Син",37:"Стоящие в ряд",38:"Сад",39:"Толпы",40:"Прощающий",41:"Разъяснены",42:"Совет",43:"Украшения",44:"Дым",45:"Коленопреклонённая",46:"Барханы",47:"Мухаммад",48:"Победа",49:"Комнаты",50:"Каф",51:"Рассеивающие",52:"Гора",53:"Звезда",54:"Месяц",55:"Милостивый",56:"Событие",57:"Железо",58:"Препирающаяся",59:"Сбор",60:"Испытуемая",61:"Ряд",62:"Пятница",63:"Лицемеры",64:"Взаимное обделение",65:"Развод",66:"Запрещение",67:"Власть",68:"Письменная трость",69:"Неизбежное",70:"Ступени",71:"Нух",72:"Джинны",73:"Закутавшийся",74:"Завернувшийся",75:"Воскресение",76:"Человек",77:"Посылаемые",78:"Весть",79:"Вырывающие",80:"Нахмурился",81:"Скручивание",82:"Раскалывание",83:"Обвешивающие",84:"Разверзнётся",85:"Созвездия",86:"Ночной путник",87:"Высочайший",88:"Покрывающее",89:"Заря",90:"Город",91:"Солнце",92:"Ночь",93:"Утро",94:"Раскрытие",95:"Смоковница",96:"Сгусток",97:"Предопределение",98:"Ясное знамение",99:"Землетрясение",100:"Скачущие",101:"Великое бедствие",102:"Приумножение",103:"Время",104:"Хулитель",105:"Слон",106:"Курайш",107:"Мелочь",108:"Изобилие",109:"Неверующие",110:"Помощь",111:"Пальмовые волокна",112:"Искренность",113:"Рассвет",114:"Люди"},ms="بِسْمِ اللَّهِ الرَّحْمَٰنِ الرَّحِيمِ";function we(m){return`https://cdn.islamic.network/quran/audio/128/ar.alafasy/${m}.mp3`}const Se="iman_selected_reciter",xs={id:7,name:"مشاري العفاسي",server:"https://server8.mp3quran.net/afs/",moshafId:7,surahTotal:114,surahList:Array.from({length:114},(m,x)=>x+1)};function us(){try{const m=localStorage.getItem(Se);if(m){const x=JSON.parse(m);if(x&&x.id&&x.name&&x.server)return x}}catch{}return xs}function hs(m){try{localStorage.setItem(Se,JSON.stringify(m))}catch{}}function vs(){const[m,x]=n.useState([]),[ee,ke]=n.useState(!0),[y,se]=n.useState(""),[i,te]=n.useState(null),[o,M]=n.useState([]),[d,B]=n.useState(null),[ae,re]=n.useState(!1),[O,le]=n.useState([]),[ne,Ae]=n.useState(null),U="iman_quran_notes",[z,ie]=n.useState(()=>{try{const s=localStorage.getItem(U);return s?JSON.parse(s):{}}catch{return{}}}),[Ce,A]=n.useState(null),[ce,v]=n.useState("");function q(s,t){return`${s}:${t}`}function Ie(s,t,a){const l=q(s,t),c={...z};a.trim()?c[l]=a.trim():delete c[l],ie(c),localStorage.setItem(U,JSON.stringify(c)),X(),A(null),v("")}function Pe(s,t){const a=q(s,t),l={...z};delete l[a],ie(l),localStorage.setItem(U,JSON.stringify(l)),X()}const[w,Re]=n.useState(us),[Le,C]=n.useState(!1),[I,oe]=n.useState([]),[P,R]=n.useState(!1),[p,J]=n.useState(""),L=Ve(),[r,u]=n.useState(null),[de,Q]=n.useState(0),[$,D]=n.useState(0),[F,h]=n.useState(!1),f=n.useRef(null),N=n.useRef(new Map);n.useEffect(()=>{async function s(){try{const t=await He();x(t)}catch(t){console.error("Failed to load surah list:",t)}finally{ke(!1)}}s(),le(S.getQuranBookmarks())},[]),n.useEffect(()=>{const s=new Audio;return s.preload="auto",f.current=s,()=>{s.pause(),s.src=""}},[]);const $e=n.useCallback(s=>{if(!f.current||o.length===0)return;const t=o[s];if(!t)return;const a=f.current;a.pause(),a.src=we(t.globalNumber),u({isPlaying:!0,currentAyahIndex:s,surahNumber:i,surahName:g[i]||d?.englishName||"",totalAyahs:o.length,mode:"single"}),h(!0),a.oncanplay=()=>{h(!1)},a.onended=()=>{u(l=>l?{...l,isPlaying:!1}:null)},a.ontimeupdate=()=>{Q(a.currentTime)},a.onloadedmetadata=()=>{D(a.duration)},a.onerror=()=>{h(!1),u(l=>l?{...l,isPlaying:!1}:null)},a.play().catch(()=>{h(!1)})},[o,i,d]),me=n.useCallback((s=0)=>{if(!f.current||o.length===0)return;const t=f.current;t.pause();const a=o[s];if(!a)return;t.src=we(a.globalNumber),u({isPlaying:!0,currentAyahIndex:s,surahNumber:i,surahName:g[i]||d?.englishName||"",totalAyahs:o.length,mode:"surah"});const l=N.current.get(s);l&&l.scrollIntoView({behavior:"smooth",block:"center"}),h(!0),t.oncanplay=()=>{h(!1)},t.onended=()=>{const c=s+1;c<o.length?me(c):u(j=>j?{...j,isPlaying:!1}:null)},t.ontimeupdate=()=>{Q(t.currentTime)},t.onloadedmetadata=()=>{D(t.duration)},t.onerror=()=>{h(!1),u(c=>c?{...c,isPlaying:!1}:null)},t.play().catch(()=>{h(!1)})},[o,i,d]),V=n.useCallback(()=>{if(!f.current||!r)return;const s=f.current;r.isPlaying?(s.pause(),u(t=>t?{...t,isPlaying:!1}:null)):(s.play().catch(console.error),u(t=>t?{...t,isPlaying:!0}:null))},[r]),T=n.useCallback(()=>{if(!f.current)return;const s=f.current;s.pause(),s.src="",s.onended=null,s.ontimeupdate=null,s.onloadedmetadata=null,s.oncanplay=null,s.onerror=null,u(null),Q(0),D(0),h(!1)},[]);n.useEffect(()=>{if(r?.isPlaying&&r.mode==="surah"){const s=N.current.get(r.currentAyahIndex);s&&s.scrollIntoView({behavior:"smooth",block:"center"})}},[r?.currentAyahIndex,r?.isPlaying,r?.mode]);const xe="iman_quran_read_surahs";function Te(){try{const s=localStorage.getItem(xe);return s?JSON.parse(s):[]}catch{return[]}}function Ee(s){const t=Te();return t.includes(s)?!1:(t.push(s),localStorage.setItem(xe,JSON.stringify(t)),X(),!0)}async function _e(s){T(),te(s),re(!0),M([]),B(null),N.current.clear();try{const[t,a]=await Promise.all([Ge(s),Xe(s)]);B(t);const l=t.ayahs.map((c,j)=>({numberInSurah:c.numberInSurah,globalNumber:c.number,arabic:c.text,translation:a.ayahs[j]?.text||""}));M(l),Ee(s)&&S.addExtraPoints(We.QURAN)}catch(t){console.error("Failed to load surah:",t)}finally{re(!1)}}function Me(s){return O.some(t=>t.surahNumber===s)}function Be(s,t){O.some(l=>l.surahNumber===s&&l.ayahNumber===t)?S.removeQuranBookmark(s,t):S.addQuranBookmark(s,t),le(S.getQuranBookmarks())}function Oe(s,t){return O.some(a=>a.surahNumber===s&&a.ayahNumber===t)}function Ue(){T(),te(null),M([]),B(null),N.current.clear()}async function ze(){if(C(!0),J(""),I.length===0&&!P){R(!0);try{const s=await pe();oe(s)}catch(s){console.error("Failed to load reciters:",s)}finally{R(!1)}}}function Y(s){const t={id:s.id,name:s.name,server:s.server,moshafId:s.moshafId,surahTotal:s.surahTotal,surahList:s.surahList};Re(t),hs(t),ss(),C(!1)}function qe(s){const t=I.find(a=>a.id===s);if(t){Y(t);return}P||(R(!0),pe().then(a=>{oe(a);const l=a.find(c=>c.id===s);l&&Y(l)}).catch(console.error).finally(()=>R(!1)))}function Je(s){return Ze(w,s)}const K=p.trim()?I.filter(s=>s.name.toLowerCase().includes(p.toLowerCase())):I,ue=m.filter(s=>{if(!y.trim())return!0;const t=y.toLowerCase(),a=g[s.number]||"";return s.name.includes(y)||s.englishName.toLowerCase().includes(t)||s.englishNameTranslation.toLowerCase().includes(t)||a.toLowerCase().includes(t)||String(s.number).includes(t)});function he(s){const t=Math.floor(s/60),a=Math.floor(s%60);return`${t}:${a.toString().padStart(2,"0")}`}const Qe=()=>Le?e.jsxs("div",{className:"fixed inset-0 z-[80] flex flex-col justify-end",children:[e.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:()=>C(!1)}),e.jsxs("div",{className:`relative z-10 glass t-bg-el backdrop-blur-xl
                     rounded-t-3xl border-t t-border-s
                     max-h-[85vh] flex flex-col
                     animate-slide-up`,style:{animation:"slideUp 0.3s ease-out"},children:[e.jsx("div",{className:"flex justify-center pt-3 pb-1",children:e.jsx("div",{className:"w-10 h-1 rounded-full bg-white/20"})}),e.jsxs("div",{className:"flex items-center justify-between px-5 py-3",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-white text-lg font-semibold",children:"Выбор чтеца"}),e.jsxs("p",{className:"text-slate-400 text-xs mt-0.5",children:["Текущий: ",w.name]})]}),e.jsx("button",{onClick:()=>C(!1),className:`flex items-center justify-center w-9 h-9 rounded-full
                         t-bg hover:t-bg transition-colors`,children:e.jsx(W,{className:"w-5 h-5 text-slate-400"})})]}),e.jsx("div",{className:"px-5 pb-3",children:e.jsxs("div",{className:"glass-card flex items-center gap-3 px-4 py-2.5",children:[e.jsx(Ne,{className:"w-4 h-4 text-slate-400 shrink-0"}),e.jsx("input",{type:"text",placeholder:"Поиск чтеца...",value:p,onChange:s=>J(s.target.value),className:`flex-1 bg-transparent text-white text-sm placeholder:text-slate-500
                           outline-none`}),p&&e.jsx("button",{onClick:()=>J(""),className:"text-slate-500 hover:text-slate-300",children:e.jsx(W,{className:"w-4 h-4"})})]})}),e.jsxs("div",{className:"flex-1 overflow-y-auto px-5 pb-8 overscroll-contain",children:[!p.trim()&&e.jsxs("div",{className:"mb-5",children:[e.jsx("h3",{className:"text-emerald-400 text-xs font-semibold uppercase tracking-wider mb-3",children:"Популярные чтецы"}),e.jsx("div",{className:"space-y-1.5",children:es.map(s=>{const t=w.id===s.id;return e.jsxs("button",{onClick:()=>qe(s.id),className:`w-full flex items-center gap-3 px-4 py-3 rounded-xl
                                    transition-all duration-150 text-left
                                    ${t?"bg-emerald-500/15 border border-emerald-500/30":"bg-white/[0.03] border border-transparent hover:bg-white/[0.06]"}`,children:[e.jsx("div",{className:`flex items-center justify-center w-9 h-9 rounded-full shrink-0
                                      ${t?"bg-emerald-500/20":"t-bg"}`,children:e.jsx(ye,{className:`w-4 h-4 ${t?"text-emerald-400":"text-slate-400"}`})}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsx("p",{className:`text-sm font-medium truncate arabic-text ${t?"text-emerald-300":"text-white"}`,children:s.name})}),t&&e.jsx(ge,{className:"w-5 h-5 text-emerald-400 shrink-0"})]},s.id)})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-slate-400 text-xs font-semibold uppercase tracking-wider mb-3",children:p.trim()?`Результаты (${K.length})`:"Все чтецы"}),P&&e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 gap-3",children:[e.jsx(k,{className:"w-8 h-8 text-emerald-400 animate-spin"}),e.jsx("p",{className:"text-slate-400 text-sm",children:"Загрузка списка..."})]}),!P&&K.length===0&&e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-slate-500 text-sm",children:p.trim()?"Ничего не найдено":"Не удалось загрузить список чтецов"})}),e.jsx("div",{className:"space-y-1",children:K.map(s=>{const t=w.id===s.id,a=i?s.surahList.includes(i):!0;return e.jsxs("button",{onClick:()=>Y(s),disabled:!a,className:`w-full flex items-center gap-3 px-4 py-2.5 rounded-xl
                                  transition-all duration-150 text-left
                                  ${a?t?"bg-emerald-500/15 border border-emerald-500/30":"bg-white/[0.02] border border-transparent hover:bg-white/[0.05]":"opacity-40 cursor-not-allowed"}`,children:[e.jsx("div",{className:`flex items-center justify-center w-8 h-8 rounded-full shrink-0
                                    ${t?"bg-emerald-500/20":"t-bg"}`,children:e.jsx("span",{className:`text-xs font-bold ${t?"text-emerald-400":"text-slate-500"}`,children:s.letter})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:`text-sm font-medium truncate arabic-text ${t?"text-emerald-300":"text-white/90"}`,children:s.name}),e.jsxs("p",{className:"text-slate-500 text-[11px]",children:[s.surahTotal," сур",!a&&" -- нет этой суры"]})]}),t&&e.jsx(ge,{className:"w-4 h-4 text-emerald-400 shrink-0"})]},s.id)})})]})]})]}),e.jsx("style",{children:`
          @keyframes slideUp {
            from { transform: translateY(100%); }
            to { transform: translateY(0); }
          }
        `})]}):null,De=()=>{if(!r)return null;const s=$>0?de/$*100:0;return e.jsxs("div",{className:"fixed bottom-16 left-0 right-0 z-50",children:[e.jsx("div",{className:"w-full h-1 t-bg",children:e.jsx("div",{className:"h-full bg-emerald-500 transition-all duration-200",style:{width:`${s}%`}})}),e.jsx("div",{className:"glass t-bg-el backdrop-blur-xl border-t t-border px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex items-center justify-center w-10 h-10 rounded-full bg-emerald-500/15 shrink-0",children:e.jsx(G,{className:"w-5 h-5 text-emerald-400"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-white text-sm font-medium truncate",children:r.surahName}),e.jsxs("p",{className:"text-slate-400 text-xs",children:[r.mode==="surah"?`Аят ${r.currentAyahIndex+1} из ${r.totalAyahs}`:`Аят ${r.currentAyahIndex+1}`,$>0&&e.jsxs("span",{className:"ml-2",children:[he(de)," / ",he($)]})]})]}),e.jsxs("div",{className:"flex items-center gap-1 shrink-0",children:[e.jsx("button",{onClick:V,className:`flex items-center justify-center w-10 h-10 rounded-full
                           bg-emerald-500/20 hover:bg-emerald-500/30 transition-colors`,children:r.isPlaying?e.jsx(_,{className:"w-5 h-5 text-emerald-400"}):e.jsx(H,{className:"w-5 h-5 text-emerald-400 ml-0.5"})}),e.jsx("button",{onClick:T,className:`flex items-center justify-center w-10 h-10 rounded-full
                           hover:t-bg transition-colors`,children:e.jsx(W,{className:"w-5 h-5 text-slate-400"})})]})]})})]})};if(i!==null){const s=i!==1&&i!==9;return e.jsxs("div",{className:"min-h-screen pb-24",children:[e.jsx("div",{className:"sticky top-0 z-10 glass px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:Ue,className:`flex items-center justify-center w-10 h-10 rounded-full
                         t-bg hover:t-bg transition-colors`,children:e.jsx(Ye,{className:"w-5 h-5 text-slate-300"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h1",{className:"text-lg font-semibold text-white truncate",children:d?.englishName||`Surah ${i}`}),e.jsxs("p",{className:"text-xs text-slate-400",children:[g[i]||""," ·"," ",d?.numberOfAyahs||"..."," аятов"]})]}),e.jsx("div",{className:"arabic-text text-emerald-400 text-lg",children:d?.name||""})]})}),ae&&e.jsxs("div",{className:"flex flex-col items-center justify-center py-32 gap-4",children:[e.jsx(k,{className:"w-10 h-10 text-emerald-400 animate-spin"}),e.jsx("p",{className:"text-slate-400 text-sm",children:"Загрузка суры..."})]}),!ae&&o.length>0&&e.jsxs("div",{className:"px-4 py-6 space-y-6",children:[e.jsx("div",{className:"flex justify-center",children:e.jsxs("button",{onClick:()=>{r?.isPlaying&&r.mode==="surah"?V():me(0)},className:`flex items-center gap-3 px-6 py-3 rounded-full
                           bg-emerald-500/15 border border-emerald-500/30
                           hover:bg-emerald-500/25 active:scale-[0.97]
                           transition-all duration-150`,children:[F&&r?.mode==="surah"?e.jsx(k,{className:"w-5 h-5 text-emerald-400 animate-spin"}):r?.isPlaying&&r.mode==="surah"?e.jsx(_,{className:"w-5 h-5 text-emerald-400"}):e.jsx(H,{className:"w-5 h-5 text-emerald-400 ml-0.5"}),e.jsx("span",{className:"text-emerald-300 text-sm font-medium",children:F&&r?.mode==="surah"?"Загрузка...":r?.isPlaying&&r.mode==="surah"?`Пауза  --  Аят ${r.currentAyahIndex+1} из ${r.totalAyahs}`:"Слушать суру"}),e.jsx(G,{className:"w-4 h-4 text-emerald-500/60"})]})}),r&&r.mode==="surah"&&e.jsx("div",{className:"flex justify-center",children:e.jsxs("button",{onClick:T,className:`flex items-center gap-2 px-4 py-2 rounded-full
                             bg-red-500/10 border border-red-500/20
                             hover:bg-red-500/20 transition-colors`,children:[e.jsx(ns,{className:"w-4 h-4 text-red-400"}),e.jsx("span",{className:"text-red-300 text-xs font-medium",children:"Остановить"})]})}),e.jsx("div",{className:"flex justify-center",children:e.jsxs("button",{onClick:ze,className:`flex items-center gap-2 px-4 py-2 rounded-full
                           bg-white/[0.04] border t-border-s
                           hover:bg-white/[0.08] active:scale-[0.97]
                           transition-all duration-150`,children:[e.jsx(ye,{className:"w-4 h-4 text-slate-400"}),e.jsx("span",{className:"text-slate-300 text-xs font-medium truncate max-w-[180px] arabic-text",children:w.name}),e.jsx(be,{className:"w-3 h-3 text-slate-500"})]})}),e.jsx("div",{className:"flex justify-center",children:L.currentSurah?.number===i&&L.isPlaying?e.jsxs("button",{onClick:()=>L.pause(),className:`flex items-center gap-2 px-5 py-2.5 rounded-full
                             bg-amber-500/15 border border-amber-500/30
                             hover:bg-amber-500/25 active:scale-[0.97]
                             transition-all duration-150`,children:[e.jsx(_,{className:"w-4 h-4 text-amber-400"}),e.jsx("span",{className:"text-amber-300 text-xs font-medium",children:"Фоновое воспроизведение..."})]}):e.jsxs("button",{onClick:()=>{d&&L.play(i,d.name,g[i]||d.englishName,Je(i))},className:`flex items-center gap-2 px-5 py-2.5 rounded-full
                             bg-amber-500/10 border border-amber-500/20
                             hover:bg-amber-500/20 active:scale-[0.97]
                             transition-all duration-150`,children:[e.jsx(G,{className:"w-4 h-4 text-amber-400"}),e.jsx("span",{className:"text-amber-300 text-xs font-medium",children:"Слушать фоном"})]})}),s&&e.jsxs("div",{className:"text-center py-6",children:[e.jsx("p",{className:"arabic-text text-2xl text-amber-200/90 leading-loose",children:ms}),e.jsx("div",{className:"mt-3 mx-auto w-32 h-px bg-gradient-to-r from-transparent via-emerald-500/40 to-transparent"})]}),o.map((t,a)=>{const l=r?.isPlaying&&r.currentAyahIndex===a,c=F&&r?.currentAyahIndex===a,j=r&&r.mode==="surah"&&r.currentAyahIndex>a;return e.jsxs("div",{ref:b=>{b?N.current.set(a,b):N.current.delete(a)},className:`glass-card p-5 animate-fade-in transition-all duration-300 ${l?"ring-2 ring-emerald-500/50 shadow-lg shadow-emerald-500/10":""} ${j?"opacity-60":""}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`flex items-center justify-center w-9 h-9 rounded-full
                                    border ${l?"border-emerald-400/60 bg-emerald-500/20":"border-emerald-500/30 bg-emerald-500/10"}`,children:e.jsx("span",{className:"text-emerald-400 text-xs font-bold",children:t.numberInSurah})}),e.jsx("button",{onClick:()=>{r?.isPlaying&&r.currentAyahIndex===a?V():$e(a)},className:`flex items-center justify-center w-9 h-9 rounded-full
                                    transition-all duration-200 ${l?"bg-emerald-500/25 scale-110":c?"bg-emerald-500/15 animate-pulse":"t-bg hover:bg-emerald-500/15"}`,title:c?"Загрузка...":l?"Пауза":"Воспроизвести аят",children:c?e.jsx(k,{className:"w-4 h-4 text-emerald-400 animate-spin"}):l?e.jsx(_,{className:"w-4 h-4 text-emerald-400"}):e.jsx(H,{className:"w-4 h-4 text-slate-400 hover:text-emerald-400 ml-0.5 transition-colors"})})]}),e.jsx("button",{onClick:()=>Be(i,t.numberInSurah),className:"p-2 rounded-full hover:t-bg transition-colors",children:Oe(i,t.numberInSurah)?e.jsx(Ke,{className:"w-5 h-5 text-amber-400 fill-amber-400"}):e.jsx(je,{className:"w-5 h-5 text-slate-500 hover:text-amber-400 transition-colors"})})]}),e.jsx("p",{className:"arabic-text text-xl sm:text-2xl text-amber-50 text-right leading-[2.2] mb-4",children:t.arabic}),rs(i,t.numberInSurah)&&e.jsxs("div",{className:"mb-3 p-3 rounded-lg bg-emerald-500/5 border border-emerald-500/15",children:[e.jsx("div",{className:"flex items-center gap-2 mb-1.5",children:e.jsx("span",{className:"text-[10px] font-semibold uppercase tracking-widest text-emerald-400/70",children:"Произношение"})}),e.jsx("p",{className:"text-emerald-200 text-sm leading-relaxed italic",children:ls(i,t.numberInSurah)})]}),e.jsx("div",{className:"w-full h-px t-bg mb-3"}),e.jsx("p",{className:"text-slate-300 text-sm leading-relaxed",children:t.translation}),ts(i,t.numberInSurah)&&e.jsxs("div",{className:"mt-3",children:[e.jsxs("button",{onClick:()=>Ae(b=>b===t.numberInSurah?null:t.numberInSurah),className:`flex items-center gap-2 px-3 py-1.5 rounded-lg text-xs font-medium transition-all ${ne===t.numberInSurah?"bg-purple-500/20 text-purple-300 border border-purple-500/30":"t-bg text-slate-400 hover:text-purple-300 hover:bg-purple-500/10"}`,children:[e.jsx(je,{className:"w-3.5 h-3.5"}),"Тафсир"]}),e.jsx("div",{className:`overflow-hidden transition-all duration-300 ease-in-out ${ne===t.numberInSurah?"max-h-[500px] opacity-100 mt-3":"max-h-0 opacity-0"}`,children:e.jsxs("div",{className:"p-4 rounded-xl bg-purple-500/5 border border-purple-500/15",children:[e.jsx("div",{className:"flex items-center gap-2 mb-2",children:e.jsx("span",{className:"text-[10px] font-semibold uppercase tracking-widest text-purple-400/80",children:"Толкование"})}),e.jsx("p",{className:"text-sm text-slate-300 leading-relaxed",children:as(i,t.numberInSurah)?.text})]})})]}),(()=>{const b=q(i,t.numberInSurah),E=z[b],fe=Ce===b;return e.jsxs("div",{className:"mt-3",children:[E&&!fe&&e.jsxs("div",{className:"p-3 rounded-xl bg-amber-500/5 border border-amber-500/20 mb-2",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:"text-[10px] font-semibold uppercase tracking-widest text-amber-400/70",children:"Заметка"}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("button",{onClick:()=>{A(b),v(E)},className:"p-1 rounded hover:bg-amber-500/10",children:e.jsx(ve,{className:"w-3 h-3 text-amber-400/60"})}),e.jsx("button",{onClick:()=>Pe(i,t.numberInSurah),className:"p-1 rounded hover:bg-red-500/10",children:e.jsx(is,{className:"w-3 h-3 text-red-400/60"})})]})]}),e.jsx("p",{className:"text-sm text-amber-200/80 leading-relaxed",children:E})]}),fe?e.jsxs("div",{className:"p-3 rounded-xl bg-amber-500/5 border border-amber-500/30",children:[e.jsx("textarea",{value:ce,onChange:Fe=>v(Fe.target.value),placeholder:"Ваша заметка к аяту...",className:"w-full bg-transparent text-sm text-slate-200 placeholder-slate-500 resize-none outline-none min-h-[60px]",autoFocus:!0}),e.jsxs("div",{className:"flex gap-2 mt-2 justify-end",children:[e.jsx("button",{onClick:()=>{A(null),v("")},className:"px-3 py-1 rounded-lg text-xs text-slate-400 hover:bg-slate-700/50",children:"Отмена"}),e.jsx("button",{onClick:()=>Ie(i,t.numberInSurah,ce),className:"px-3 py-1 rounded-lg text-xs bg-amber-500/20 text-amber-300 hover:bg-amber-500/30",children:"Сохранить"})]})]}):!E&&e.jsxs("button",{onClick:()=>{A(b),v("")},className:"flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-xs text-slate-500 hover:text-amber-300 hover:bg-amber-500/10 t-bg transition-all",children:[e.jsx(ve,{className:"w-3.5 h-3.5"}),"Заметка"]})]})})()]},t.numberInSurah)}),e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"mx-auto w-16 h-px bg-gradient-to-r from-transparent via-emerald-500/30 to-transparent mb-3"}),e.jsxs("p",{className:"text-slate-500 text-xs",children:["Конец суры «",g[i]||d?.englishName,"»"]})]}),r&&e.jsx("div",{className:"h-24"})]}),De(),Qe()]})}return e.jsxs("div",{className:"min-h-screen pb-24",children:[e.jsxs("div",{className:"px-4 pt-6 pb-4",children:[e.jsx("h1",{className:"text-2xl font-bold text-white mb-1",children:"Коран"}),e.jsx("p",{className:"text-slate-400 text-sm",children:"114 сур Священного Корана"})]}),e.jsx("div",{className:"px-4 mb-4",children:e.jsxs("div",{className:"glass-card flex items-center gap-3 px-4 py-3",children:[e.jsx(Ne,{className:"w-5 h-5 text-slate-400 shrink-0"}),e.jsx("input",{type:"text",placeholder:"Поиск суры...",value:y,onChange:s=>se(s.target.value),className:`flex-1 bg-transparent text-white text-sm placeholder:text-slate-500
                       outline-none`}),y&&e.jsx("button",{onClick:()=>se(""),className:"text-slate-500 hover:text-slate-300 text-xs",children:"Очистить"})]})}),ee&&e.jsxs("div",{className:"flex flex-col items-center justify-center py-32 gap-4",children:[e.jsx(k,{className:"w-10 h-10 text-emerald-400 animate-spin"}),e.jsx("p",{className:"text-slate-400 text-sm",children:"Загрузка списка сур..."})]}),!ee&&e.jsxs("div",{className:"px-4 space-y-2",children:[ue.length===0&&e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-slate-500",children:"Ничего не найдено"})}),ue.map(s=>{const t=g[s.number]||"",a=Me(s.number),l=s.revelationType==="Meccan";return e.jsxs("button",{onClick:()=>_e(s.number),className:`glass-card w-full flex items-center gap-4 p-4
                           hover:bg-white/[0.04] active:scale-[0.99]
                           transition-all duration-150 text-left`,children:[e.jsxs("div",{className:`relative flex items-center justify-center w-12 h-12 shrink-0
                             rounded-full border border-emerald-500/30 bg-emerald-500/10`,children:[e.jsx("span",{className:"text-emerald-400 text-sm font-bold",children:s.number}),a&&e.jsx("div",{className:"absolute -top-1 -right-1",children:e.jsx("svg",{className:"w-4 h-4 text-amber-400 fill-amber-400",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-white font-medium text-sm truncate",children:t}),e.jsxs("span",{className:"text-slate-500 text-xs truncate",children:["/ ",s.englishName]})]}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsxs("span",{className:"text-slate-400 text-xs",children:[s.numberOfAyahs," аятов"]}),e.jsx("span",{className:`text-[10px] px-2 py-0.5 rounded-full font-medium ${l?"bg-emerald-500/10 text-emerald-400":"bg-blue-500/10 text-blue-400"}`,children:l?"Мекканская":"Мединская"})]})]}),e.jsx("span",{className:"arabic-text text-amber-100/80 text-lg shrink-0",children:s.name}),e.jsx(be,{className:"w-4 h-4 text-slate-600 shrink-0"})]},s.number)})]})]})}export{vs as default};
