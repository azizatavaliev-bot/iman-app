# üìã –ü–õ–ê–ù –£–õ–£–ß–®–ï–ù–ò–ô IMAN APP (IMANEP)

**–î–∞—Ç–∞:** 19 —Ñ–µ–≤—Ä–∞–ª—è 2026  
**–°—Ç–∞—Ç—É—Å:** –ì–æ—Ç–æ–≤ –∫ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏  
**–ü—Ä–æ–≥—Ä–µ—Å—Å:** 0% ‚Üí 100%

---

## üéØ –ì–õ–ê–í–ù–ê–Ø –¶–ï–õ–¨

**–û–±–µ—Å–ø–µ—á–∏—Ç—å –Ω–∞–¥—ë–∂–Ω–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤—Å–µ—Ö –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ PostgreSQL –∏ —É–ª—É—á—à–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è**

---

## üìä –¢–ï–ö–£–©–ï–ï –°–û–°–¢–û–Ø–ù–ò–ï (–ê–Ω–∞–ª–∏–∑ –∑–∞–≤–µ—Ä—à—ë–Ω ‚úÖ)

### ‚úÖ –ß—Ç–æ —É–∂–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:

1. **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö PostgreSQL –Ω–∞ Railway**
   - ‚úÖ –°–µ—Ä–≤–∏—Å PostgreSQL —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç
   - ‚úÖ –¢–∞–±–ª–∏—Ü—ã —Å–æ–∑–¥–∞–Ω—ã: `users`, `analytics`, `subscribers`
   - ‚úÖ –ò–Ω–¥–µ–∫—Å—ã –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞
   - ‚úÖ DATABASE_URL –ø–æ–¥–∫–ª—é—á–µ–Ω –∫ —Å–µ—Ä–≤–µ—Ä—É

2. **–°–∏—Å—Ç–µ–º–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö**
   - ‚úÖ –ö–∞–∂–¥—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∏–¥–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä—É–µ—Ç—Å—è –ø–æ Telegram ID
   - ‚úÖ –î–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ JSONB —Ñ–æ—Ä–º–∞—Ç–µ
   - ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥
   - ‚úÖ ON CONFLICT –æ–±–Ω–æ–≤–ª—è–µ—Ç –¥–∞–Ω–Ω—ã–µ, –Ω–µ –¥—É–±–ª–∏—Ä—É–µ—Ç

3. **–°—Ç—Ä–∞–Ω–∏—Ü—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (25 —Å—Ç—Ä–∞–Ω–∏—Ü)**
   - Dashboard, Prayers, Quran, Hadiths, Dua, Dhikr
   - Quiz, Memorize, NamesGame, Habits, IbadahTimer
   - Stats, Leaderboard, Profile, Qibla, Seerah
   - Ramadan, Guide, NamazGuide, Beginners, Recommended
   - Admin, AdminNew, AboutApp, Onboarding

4. **–î–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π**
   ```json
   {
     "iman_profile": "–ò–º—è, –≥–æ—Ä–æ–¥, –±–∞–ª–ª—ã, —É—Ä–æ–≤–µ–Ω—å, —Å—Ç—Ä–∏–∫",
     "iman_prayer_logs": "–ò—Å—Ç–æ—Ä–∏—è –Ω–∞–º–∞–∑–æ–≤",
     "iman_habit_logs": "–ü—Ä–∏–≤—ã—á–∫–∏",
     "iman_favorite_hadiths": "–ò–∑–±—Ä–∞–Ω–Ω—ã–µ —Ö–∞–¥–∏—Å—ã",
     "iman_quran_bookmarks": "–ó–∞–∫–ª–∞–¥–∫–∏ –ö–æ—Ä–∞–Ω–∞",
     "iman_names_progress": "–ü—Ä–æ–≥—Ä–µ—Å—Å –∏–∑—É—á–µ–Ω–∏—è –∏–º—ë–Ω –ê–ª–ª–∞—Ö–∞",
     "iman_ibadah_sessions": "–°–µ—Å—Å–∏–∏ –∏–±–∞–¥–∞—Ç–∞",
     "iman_memorization": "–ó–∞—É—á–∏–≤–∞–Ω–∏–µ –∞—è—Ç–æ–≤",
     "iman_quiz_scores": "–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤–∏–∫—Ç–æ—Ä–∏–Ω",
     "iman_ramadan_2026": "–î–∞–Ω–Ω—ã–µ –ø–æ –†–∞–º–∞–¥–∞–Ω—É"
   }
   ```

### ‚ö†Ô∏è –ß—Ç–æ –Ω—É–∂–Ω–æ —É–ª—É—á—à–∏—Ç—å:

1. **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö**
   - ‚ùå Ramadan –¥–∞–Ω–Ω—ã–µ –ù–ï —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É—é—Ç—Å—è —Å —Å–µ—Ä–≤–µ—Ä–æ–º
   - ‚ùå –ù–µ—Ç –æ—Ç–¥–µ–ª—å–Ω–æ–π —Ç–∞–±–ª–∏—Ü—ã –¥–ª—è –¥–∞–Ω–Ω—ã—Ö –†–∞–º–∞–¥–∞–Ω–∞
   - ‚ùå –ù–µ—Ç —Ç–∞–±–ª–∏—Ü—ã –¥–ª—è –∞—è—Ç–æ–≤ –¥–Ω—è –Ω–∞ —Å—É—Ö—É—Ä/–∏—Ñ—Ç–∞—Ä

2. **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è**
   - ‚ùå –ù–µ–∫–æ—Ç–æ—Ä—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –¥–æ—Å—Ç—É–ø–Ω—ã –±–µ–∑ Telegram ID
   - ‚ùå –ù–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –Ω–∞ –≤—Å–µ—Ö —Å—Ç—Ä–∞–Ω–∏—Ü–∞—Ö

3. **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –º–µ–Ω–µ–¥–∂–µ—Ä–æ–≤**
   - ‚ùå –ù–µ—Ç —Å–∏—Å—Ç–µ–º—ã —Ä–æ–ª–µ–π (–∞–¥–º–∏–Ω/–º–µ–Ω–µ–¥–∂–µ—Ä/–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å)
   - ‚ùå –ù–µ—Ç –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è, –∫—Ç–æ –∫–æ–≥–æ –ø—Ä–∏–≤—ë–ª
   - ‚ùå –ù–µ—Ç –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –º–µ—Ç—Ä–∏–∫ –¥–ª—è –º–µ–Ω–µ–¥–∂–µ—Ä–æ–≤

4. **Ramadan —Ñ—É–Ω–∫—Ü–∏–∏**
   - ‚ùå –ù–µ—Ç –∞—è—Ç–æ–≤ –ö–æ—Ä–∞–Ω–∞ –¥–ª—è —Å—É—Ö—É—Ä–∞ –∏ –∏—Ñ—Ç–∞—Ä–∞
   - ‚ùå –ù–µ—Ç —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π –ø–æ –∫–∞–∂–¥–æ–º—É –¥–Ω—é –†–∞–º–∞–¥–∞–Ω–∞

---

## üöÄ –ü–õ–ê–ù –£–õ–£–ß–®–ï–ù–ò–ô (7 —ç—Ç–∞–ø–æ–≤)

### **–≠–¢–ê–ü 1: –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è Ramadan** üåô
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –í–´–°–û–ö–ò–ô  
**–í—Ä–µ–º—è:** 30 –º–∏–Ω—É—Ç  
**–ü—Ä–æ–≥—Ä–µ—Å—Å:** 0% ‚Üí 15%

#### –ß—Ç–æ –¥–µ–ª–∞–µ–º:

1. **–°–æ–∑–¥–∞—ë–º —Ç–∞–±–ª–∏—Ü—É `ramadan_data`**
   ```sql
   CREATE TABLE ramadan_data (
     telegram_id BIGINT PRIMARY KEY REFERENCES users(telegram_id) ON DELETE CASCADE,
     fasting_days JSONB NOT NULL DEFAULT '{}',
     goals JSONB NOT NULL DEFAULT '{}',
     updated_at BIGINT NOT NULL
   );
   ```

2. **–°–æ–∑–¥–∞—ë–º —Ç–∞–±–ª–∏—Ü—É `ramadan_ayat`**
   ```sql
   CREATE TABLE ramadan_ayat (
     id SERIAL PRIMARY KEY,
     day INT NOT NULL UNIQUE CHECK (day >= 1 AND day <= 30),
     suhoor_ayat JSONB NOT NULL,
     iftar_ayat JSONB NOT NULL,
     recommendation TEXT
   );
   ```

   **–°—Ç—Ä—É–∫—Ç—É—Ä–∞ JSON:**
   ```json
   {
     "surah": "–ê–ª—å-–ë–∞–∫–∞—Ä–∞",
     "ayat_number": 183,
     "arabic": "ŸäŸéÿß ÿ£ŸéŸäŸèŸëŸáŸéÿß ÿßŸÑŸéŸëÿ∞ŸêŸäŸÜŸé ÿ¢ŸÖŸéŸÜŸèŸàÿß...",
     "translation": "–û —Ç–µ, –∫–æ—Ç–æ—Ä—ã–µ —É–≤–µ—Ä–æ–≤–∞–ª–∏! –í–∞–º –ø—Ä–µ–¥–ø–∏—Å–∞–Ω –ø–æ—Å—Ç...",
     "theme": "–û –ø–æ—Å—Ç–µ"
   }
   ```

3. **–û–±–Ω–æ–≤–ª—è–µ–º sync.ts**
   - –î–æ–±–∞–≤–ª—è–µ–º `"iman_ramadan_2026"` –≤ —Å–ø–∏—Å–æ–∫ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ–º—ã—Ö –∫–ª—é—á–µ–π ‚úÖ (—É–∂–µ –µ—Å—Ç—å)
   - –°–æ–∑–¥–∞—ë–º –æ—Ç–¥–µ–ª—å–Ω—ã–π API –¥–ª—è Ramadan –¥–∞–Ω–Ω—ã—Ö

#### –†–µ–∑—É–ª—å—Ç–∞—Ç:
- ‚úÖ –î–∞–Ω–Ω—ã–µ Ramadan —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –Ω–∞–≤—Å–µ–≥–¥–∞
- ‚úÖ –ö–∞–∂–¥—ã–π –¥–µ–Ω—å –∏–º–µ–µ—Ç —Å–≤–æ–π –∞—è—Ç –¥–ª—è —Å—É—Ö—É—Ä–∞ –∏ –∏—Ñ—Ç–∞—Ä–∞
- ‚úÖ –ï—Å—Ç—å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –Ω–∞ –∫–∞–∂–¥—ã–π –¥–µ–Ω—å

---

### **–≠–¢–ê–ü 2: Telegram ID –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è** üîê
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô  
**–í—Ä–µ–º—è:** 45 –º–∏–Ω—É—Ç  
**–ü—Ä–æ–≥—Ä–µ—Å—Å:** 15% ‚Üí 35%

#### –ß—Ç–æ –¥–µ–ª–∞–µ–º:

1. **–°–æ–∑–¥–∞—ë–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `ProtectedRoute.tsx`**
   ```tsx
   export function ProtectedRoute({ children }: { children: React.ReactNode }) {
     const telegramId = getTelegramId();
     const navigate = useNavigate();
     
     useEffect(() => {
       if (!telegramId) {
         navigate('/onboarding');
       }
     }, [telegramId, navigate]);
     
     if (!telegramId) return null;
     
     return <>{children}</>;
   }
   ```

2. **–û–±–æ—Ä–∞—á–∏–≤–∞–µ–º –≤—Å–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã**
   ```tsx
   // –í App.tsx
   <Route path="/prayers" element={
     <ProtectedRoute>
       <Prayers />
     </ProtectedRoute>
   } />
   ```

3. **–î–æ–±–∞–≤–ª—è–µ–º —ç–∫—Ä–∞–Ω –≤—Ö–æ–¥–∞ –¥–ª—è –≤–µ–±-–≤–µ—Ä—Å–∏–∏**
   ```tsx
   // –ï—Å–ª–∏ –Ω–µ—Ç Telegram ID, –ø–æ–∫–∞–∑—ã–≤–∞–µ–º:
   <div className="text-center">
     <h1>–í—Ö–æ–¥ —á–µ—Ä–µ–∑ Telegram</h1>
     <p>–í–≤–µ–¥–∏—Ç–µ –≤–∞—à Telegram ID</p>
     <input type="number" placeholder="508698471" />
     <button>–í–æ–π—Ç–∏</button>
   </div>
   ```

#### –†–µ–∑—É–ª—å—Ç–∞—Ç:
- ‚úÖ –í—Å–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∑–∞—â–∏—â–µ–Ω—ã –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–µ–π
- ‚úÖ –ú–æ–∂–Ω–æ –≤–æ–π—Ç–∏ —á–µ—Ä–µ–∑ Telegram ID (–¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è)
- ‚úÖ –î–∞–Ω–Ω—ã–µ –Ω–µ —Å–º–µ—à–∏–≤–∞—é—Ç—Å—è –º–µ–∂–¥—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏

---

### **–≠–¢–ê–ü 3: –°–∏—Å—Ç–µ–º–∞ —Ä–æ–ª–µ–π –∏ –º–µ–Ω–µ–¥–∂–µ—Ä–æ–≤** üë•
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –í–´–°–û–ö–ò–ô  
**–í—Ä–µ–º—è:** 1 —á–∞—Å  
**–ü—Ä–æ–≥—Ä–µ—Å—Å:** 35% ‚Üí 60%

#### –ß—Ç–æ –¥–µ–ª–∞–µ–º:

1. **–û–±–Ω–æ–≤–ª—è–µ–º —Ç–∞–±–ª–∏—Ü—É `users`**
   ```sql
   ALTER TABLE users ADD COLUMN role TEXT DEFAULT 'user';
   ALTER TABLE users ADD COLUMN referred_by BIGINT REFERENCES users(telegram_id);
   ALTER TABLE users ADD COLUMN manager_stats JSONB DEFAULT '{}';
   ```

   **–†–æ–ª–∏:**
   - `admin` ‚Äî –ø–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø
   - `manager` ‚Äî –≤–∏–¥–∏—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É —Å–≤–æ–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
   - `user` ‚Äî –æ–±—ã—á–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å

2. **–°–æ–∑–¥–∞—ë–º —Ç–∞–±–ª–∏—Ü—É `referrals`**
   ```sql
   CREATE TABLE referrals (
     id SERIAL PRIMARY KEY,
     manager_id BIGINT NOT NULL REFERENCES users(telegram_id),
     user_id BIGINT NOT NULL REFERENCES users(telegram_id),
     joined_at BIGINT NOT NULL DEFAULT EXTRACT(EPOCH FROM NOW())::BIGINT * 1000,
     UNIQUE(manager_id, user_id)
   );
   CREATE INDEX idx_referrals_manager ON referrals(manager_id);
   ```

3. **API –¥–ª—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –º–µ–Ω–µ–¥–∂–µ—Ä–∞**
   ```javascript
   // GET /api/manager/:telegramId/stats
   {
     "totalReferrals": 24,
     "activeUsers": 18,
     "totalPoints": 45600,
     "avgLevel": "–ü—Ä–∞–∫—Ç–∏–∫—É—é—â–∏–π",
     "topUsers": [...]
   }
   ```

4. **–ù–æ–≤–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ `ManagerDashboard.tsx`**
   - –°–∫–æ–ª—å–∫–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ø—Ä–∏–≤—ë–ª
   - –°–∫–æ–ª—å–∫–æ –∞–∫—Ç–∏–≤–Ω—ã—Ö (–∑–∞—Ö–æ–¥–∏–ª–∏ –∑–∞ 7 –¥–Ω–µ–π)
   - –°—Ä–µ–¥–Ω–∏–π —É—Ä–æ–≤–µ–Ω—å
   - –û–±—â–∏–µ –±–∞–ª–ª—ã
   - –¢–æ–ø-10 —Å–∞–º—ã—Ö –∞–∫—Ç–∏–≤–Ω—ã—Ö

#### –†–µ–∑—É–ª—å—Ç–∞—Ç:
- ‚úÖ –ú–µ–Ω–µ–¥–∂–µ—Ä—ã –≤–∏–¥—è—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É —Å–≤–æ–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- ‚úÖ –ê–¥–º–∏–Ω—ã –≤–∏–¥—è—Ç –≤—Å–µ—Ö –º–µ–Ω–µ–¥–∂–µ—Ä–æ–≤ –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- ‚úÖ –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ, –∫—Ç–æ –∫–æ–≥–æ –ø—Ä–∏–≤—ë–ª

---

### **–≠–¢–ê–ü 4: –£–ª—É—á—à–µ–Ω–∏–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏** ‚ö°
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –°–†–ï–î–ù–ò–ô  
**–í—Ä–µ–º—è:** 30 –º–∏–Ω—É—Ç  
**–ü—Ä–æ–≥—Ä–µ—Å—Å:** 60% ‚Üí 75%

#### –ß—Ç–æ –¥–µ–ª–∞–µ–º:

1. **–î–æ–±–∞–≤–ª—è–µ–º –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏**
   ```tsx
   // –í AppShell –∏–ª–∏ Dashboard
   {isSyncing && (
     <div className="fixed top-4 right-4 bg-green-500 text-white px-4 py-2 rounded-lg">
       ‚òÅÔ∏è –°–æ—Ö—Ä–∞–Ω—è–µ–º...
     </div>
   )}
   
   {!isSyncing && lastSyncAt && (
     <div className="fixed top-4 right-4 bg-gray-700 text-white px-4 py-2 rounded-lg text-sm">
       ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–æ {formatTimeAgo(lastSyncAt)}
     </div>
   )}
   ```

2. **–£–ª—É—á—à–∞–µ–º –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫**
   ```typescript
   // –ï—Å–ª–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —É–ø–∞–ª–∞ ‚Äî –ø—Ä–æ–±—É–µ–º —Å–Ω–æ–≤–∞ —á–µ—Ä–µ–∑ 5 —Å–µ–∫—É–Ω–¥
   async function syncWithRetry(retries = 3): Promise<boolean> {
     for (let i = 0; i < retries; i++) {
       const success = await pushToServer(telegramId);
       if (success) return true;
       await sleep(5000 * (i + 1)); // 5s, 10s, 15s
     }
     return false;
   }
   ```

3. **–õ–æ–≥–∏—Ä—É–µ–º –≤—Å–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –≤ analytics**
   ```javascript
   await pool.query(
     `INSERT INTO analytics (telegram_id, type, action, metadata, timestamp)
      VALUES ($1, 'sync', 'data_saved', $2, $3)`,
     [telegramId, JSON.stringify({ keys: Object.keys(data) }), Date.now()]
   );
   ```

#### –†–µ–∑—É–ª—å—Ç–∞—Ç:
- ‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç, –∫–æ–≥–¥–∞ –¥–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π retry –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö
- ‚úÖ –í—Å—è –∏—Å—Ç–æ—Ä–∏—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–π –ª–æ–≥–∏—Ä—É–µ—Ç—Å—è

---

### **–≠–¢–ê–ü 5: –ê—è—Ç—ã –¥–ª—è Ramadan** üìñ
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –í–´–°–û–ö–ò–ô  
**–í—Ä–µ–º—è:** 2 —á–∞—Å–∞  
**–ü—Ä–æ–≥—Ä–µ—Å—Å:** 75% ‚Üí 90%

#### –ß—Ç–æ –¥–µ–ª–∞–µ–º:

1. **–ó–∞–ø–æ–ª–Ω—è–µ–º —Ç–∞–±–ª–∏—Ü—É `ramadan_ayat`**
   - 30 –∞—è—Ç–æ–≤ –¥–ª—è —Å—É—Ö—É—Ä–∞ (–æ –±–ª–∞–≥–æ—Å–ª–æ–≤–µ–Ω–∏–∏ —Ä–∞–Ω–Ω–µ–≥–æ –ø–æ–¥—ä—ë–º–∞)
   - 30 –∞—è—Ç–æ–≤ –¥–ª—è –∏—Ñ—Ç–∞—Ä–∞ (–æ –±–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç–∏ –∏ –º–∏–ª–æ—Å—Ç–∏)
   - –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –Ω–∞ –∫–∞–∂–¥—ã–π –¥–µ–Ω—å

   **–ü—Ä–∏–º–µ—Ä:**
   ```sql
   INSERT INTO ramadan_ayat (day, suhoor_ayat, iftar_ayat, recommendation) VALUES (
     1,
     '{"surah":"–ê–ª—å-–ë–∞–∫–∞—Ä–∞","ayat":183,"arabic":"ŸäŸéÿß ÿ£ŸéŸäŸèŸëŸáŸéÿß ÿßŸÑŸéŸëÿ∞ŸêŸäŸÜŸé ÿ¢ŸÖŸéŸÜŸèŸàÿß ŸÉŸèÿ™Ÿêÿ®Ÿé ÿπŸéŸÑŸéŸäŸíŸÉŸèŸÖŸè ÿßŸÑÿµŸêŸëŸäŸéÿßŸÖŸè","translation":"–û —Ç–µ, –∫–æ—Ç–æ—Ä—ã–µ —É–≤–µ—Ä–æ–≤–∞–ª–∏! –í–∞–º –ø—Ä–µ–¥–ø–∏—Å–∞–Ω –ø–æ—Å—Ç, –∫–∞–∫ –æ–Ω –±—ã–ª –ø—Ä–µ–¥–ø–∏—Å–∞–Ω –≤–∞—à–∏–º –ø—Ä–µ–¥—à–µ—Å—Ç–≤–µ–Ω–Ω–∏–∫–∞–º","theme":"–ü—Ä–µ–¥–ø–∏—Å–∞–Ω–∏–µ –ø–æ—Å—Ç–∞"}',
     '{"surah":"–ê–ª—å-–ë–∞–∫–∞—Ä–∞","ayat":186,"arabic":"ŸàŸéÿ•Ÿêÿ∞Ÿéÿß ÿ≥Ÿéÿ£ŸéŸÑŸéŸÉŸé ÿπŸêÿ®ŸéÿßÿØŸêŸä ÿπŸéŸÜŸêŸëŸä ŸÅŸéÿ•ŸêŸÜŸêŸëŸä ŸÇŸéÿ±ŸêŸäÿ®Ÿå","translation":"–ê –µ—Å–ª–∏ –ú–æ–∏ —Ä–∞–±—ã —Å–ø—Ä–æ—Å—è—Ç —Ç–µ–±—è –æ–±–æ –ú–Ω–µ, —Ç–æ –≤–µ–¥—å –Ø –±–ª–∏–∑–æ–∫","theme":"–ë–ª–∏–∑–æ—Å—Ç—å –ê–ª–ª–∞—Ö–∞"}',
     '–ü–µ—Ä–≤—ã–π –¥–µ–Ω—å –†–∞–º–∞–¥–∞–Ω–∞ ‚Äî –æ–±–Ω–æ–≤–∏ –Ω–∞–º–µ—Ä–µ–Ω–∏–µ –∏ –ø–æ–ø—Ä–æ—Å–∏ –ê–ª–ª–∞—Ö–∞ –ø—Ä–∏–Ω—è—Ç—å —Ç–≤–æ–π –ø–æ—Å—Ç'
   );
   ```

2. **–û–±–Ω–æ–≤–ª—è–µ–º Ramadan.tsx**
   ```tsx
   // –ó–∞–≥—Ä—É–∂–∞–µ–º –∞—è—Ç –¥–Ω—è
   const [todayAyat, setTodayAyat] = useState(null);
   
   useEffect(() => {
     const day = getRamadanDay(new Date());
     if (day > 0) {
       fetch(`/api/ramadan/ayat/${day}`)
         .then(r => r.json())
         .then(setTodayAyat);
     }
   }, []);
   
   // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–∞—Ä—Ç–æ—á–∫—É —Å –∞—è—Ç–æ–º
   <div className="bg-gradient-to-r from-purple-900 to-indigo-900 p-6 rounded-xl">
     <h3>üåô –ê—è—Ç –Ω–∞ {timeOfDay === 'suhoor' ? '–°—É—Ö—É—Ä' : '–ò—Ñ—Ç–∞—Ä'}</h3>
     <p className="text-2xl arabic">{ayat.arabic}</p>
     <p className="text-gray-300">{ayat.translation}</p>
     <p className="text-sm text-gray-400">{ayat.surah}, –∞—è—Ç {ayat.ayat_number}</p>
   </div>
   ```

3. **API endpoint**
   ```javascript
   // GET /api/ramadan/ayat/:day
   server.on("request", async (req, res) => {
     if (req.url?.match(/^\/api\/ramadan\/ayat\/(\d+)$/)) {
       const day = parseInt(RegExp.$1);
       const result = await pool.query(
         "SELECT suhoor_ayat, iftar_ayat, recommendation FROM ramadan_ayat WHERE day = $1",
         [day]
       );
       if (result.rows[0]) {
         res.writeHead(200, { "Content-Type": "application/json" });
         res.end(JSON.stringify(result.rows[0]));
       } else {
         res.writeHead(404);
         res.end();
       }
     }
   });
   ```

#### –†–µ–∑—É–ª—å—Ç–∞—Ç:
- ‚úÖ –ö–∞–∂–¥—ã–π –¥–µ–Ω—å –†–∞–º–∞–¥–∞–Ω–∞ –∏–º–µ–µ—Ç —Å–≤–æ–π –∞—è—Ç
- ‚úÖ –û—Ç–¥–µ–ª—å–Ω—ã–µ –∞—è—Ç—ã –¥–ª—è —Å—É—Ö—É—Ä–∞ –∏ –∏—Ñ—Ç–∞—Ä–∞
- ‚úÖ –î—É—Ö–æ–≤–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –Ω–∞ –∫–∞–∂–¥—ã–π –¥–µ–Ω—å

---

### **–≠–¢–ê–ü 6: –£–ª—É—á—à–µ–Ω–Ω–∞—è –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å** üìä
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –°–†–ï–î–ù–ò–ô  
**–í—Ä–µ–º—è:** 45 –º–∏–Ω—É—Ç  
**–ü—Ä–æ–≥—Ä–µ—Å—Å:** 90% ‚Üí 95%

#### –ß—Ç–æ –¥–µ–ª–∞–µ–º:

1. **–î–æ–±–∞–≤–ª—è–µ–º –Ω–æ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏**
   ```typescript
   interface AdminStats {
     // –£–∂–µ –µ—Å—Ç—å:
     totalUsers: number;
     onlineNow: number;
     activeToday: number;
     activeWeek: number;
     
     // –ù–û–í–´–ï:
     totalManagers: number;
     topManagers: Array<{
       telegramId: number;
       name: string;
       referrals: number;
       activeReferrals: number;
     }>;
     ramadanParticipants: number; // –ö—Ç–æ –æ—Ç–º–µ—Ç–∏–ª —Ö–æ—Ç—è –±—ã 1 –¥–µ–Ω—å
     ramadanStreak: number; // –°—Ä–µ–¥–Ω–∏–π —Å—Ç—Ä–∏–∫ –ø–æ –†–∞–º–∞–¥–∞–Ω—É
   }
   ```

2. **–ù–æ–≤—ã–µ –≤–∫–ª–∞–¥–∫–∏ –≤ Admin**
   - **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏** (—Ç–µ–∫—É—â–∞—è)
   - **–ú–µ–Ω–µ–¥–∂–µ—Ä—ã** (–Ω–æ–≤–∞—è)
   - **Ramadan** (–Ω–æ–≤–∞—è)
   - **–ê–Ω–∞–ª–∏—Ç–∏–∫–∞** (—É–ª—É—á—à–µ–Ω–Ω–∞—è)

3. **–í–∫–ª–∞–¥–∫–∞ "–ú–µ–Ω–µ–¥–∂–µ—Ä—ã"**
   ```tsx
   <table>
     <thead>
       <tr>
         <th>–ú–µ–Ω–µ–¥–∂–µ—Ä</th>
         <th>–í—Å–µ–≥–æ –ø—Ä–∏–≤—ë–ª</th>
         <th>–ê–∫—Ç–∏–≤–Ω—ã—Ö</th>
         <th>–°—Ä–µ–¥–Ω–∏–π —É—Ä–æ–≤–µ–Ω—å</th>
         <th>–û–±—â–∏–µ –±–∞–ª–ª—ã</th>
       </tr>
     </thead>
     <tbody>
       {managers.map(m => (
         <tr key={m.telegramId}>
           <td>{m.name}</td>
           <td>{m.totalReferrals}</td>
           <td>{m.activeReferrals}</td>
           <td>{m.avgLevel}</td>
           <td>{m.totalPoints}</td>
         </tr>
       ))}
     </tbody>
   </table>
   ```

4. **–í–∫–ª–∞–¥–∫–∞ "Ramadan"**
   ```tsx
   <div className="grid grid-cols-3 gap-4">
     <div className="stat-card">
       <h3>–£—á–∞—Å—Ç–Ω–∏–∫–æ–≤</h3>
       <p className="text-4xl">{ramadanStats.participants}</p>
     </div>
     <div className="stat-card">
       <h3>–°—Ä–µ–¥–Ω–∏–π —Å—Ç—Ä–∏–∫</h3>
       <p className="text-4xl">{ramadanStats.avgStreak} –¥–Ω–µ–π</p>
     </div>
     <div className="stat-card">
       <h3>–¢–∞—Ä–∞–≤–∏—Ö –≤—ã–ø–æ–ª–Ω–µ–Ω–æ</h3>
       <p className="text-4xl">{ramadanStats.taraweehTotal}</p>
     </div>
   </div>
   
   {/* –ì—Ä–∞—Ñ–∏–∫ —É—á–∞—Å—Ç–∏—è –ø–æ –¥–Ω—è–º */}
   <LineChart data={ramadanStats.dailyParticipation} />
   ```

#### –†–µ–∑—É–ª—å—Ç–∞—Ç:
- ‚úÖ –í–∏–¥–Ω–æ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –º–µ–Ω–µ–¥–∂–µ—Ä–æ–≤
- ‚úÖ –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —É—á–∞—Å—Ç–∏—è –≤ –†–∞–º–∞–¥–∞–Ω–µ
- ‚úÖ –î–µ—Ç–∞–ª—å–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –ø–æ –≤—Å–µ–º –º–µ—Ç—Ä–∏–∫–∞–º

---

### **–≠–¢–ê–ü 7: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –≥–∞—Ä–∞–Ω—Ç–∏—è —Å–æ—Ö—Ä–∞–Ω–Ω–æ—Å—Ç–∏** ‚úÖ
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô  
**–í—Ä–µ–º—è:** 1 —á–∞—Å  
**–ü—Ä–æ–≥—Ä–µ—Å—Å:** 95% ‚Üí 100%

#### –ß—Ç–æ –¥–µ–ª–∞–µ–º:

1. **–¢–µ—Å—Ç–æ–≤—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏**
   ```
   ‚úÖ –°—Ü–µ–Ω–∞—Ä–∏–π 1: –ù–æ–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
      1. Telegram ID = 999999999
      2. –ü—Ä–æ—Ö–æ–¥–∏—Ç –æ–Ω–±–æ—Ä–¥–∏–Ω–≥
      3. –û—Ç–º–µ—á–∞–µ—Ç –Ω–∞–º–∞–∑ ‚Üí +18 –±–∞–ª–ª–æ–≤
      4. –ü—Ä–æ–≤–µ—Ä—è–µ–º –≤ PostgreSQL: –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –∑–∞–ø–∏—Å—å
      5. –í—ã—Ö–æ–¥–∏—Ç –∏ –∑–∞—Ö–æ–¥–∏—Ç —Å–Ω–æ–≤–∞
      6. –ë–∞–ª–ª—ã –Ω–∞ –º–µ—Å—Ç–µ ‚úÖ
   
   ‚úÖ –°—Ü–µ–Ω–∞—Ä–∏–π 2: Ramadan
      1. –û—Ç–º–µ—á–∞–µ—Ç –ø–æ—Å—Ç –¥–Ω—è 1
      2. –í—ã–ø–æ–ª–Ω—è–µ—Ç —Ü–µ–ª—å "–¢–∞—Ä–∞–≤–∏—Ö"
      3. –í—ã—Ö–æ–¥–∏—Ç –∏–∑ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
      4. –ó–∞—Ö–æ–¥–∏—Ç —á–µ—Ä–µ–∑ —á–∞—Å
      5. –î–∞–Ω–Ω—ã–µ –Ω–∞ –º–µ—Å—Ç–µ ‚úÖ
      6. –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–µ—Ä–≤–µ—Ä: ramadan_data –æ–±–Ω–æ–≤–ª–µ–Ω–∞ ‚úÖ
   
   ‚úÖ –°—Ü–µ–Ω–∞—Ä–∏–π 3: –û—Ñ–ª–∞–π–Ω —Ä–µ–∂–∏–º
      1. –û—Ç–∫–ª—é—á–∞–µ–º –∏–Ω—Ç–µ—Ä–Ω–µ—Ç
      2. –û—Ç–º–µ—á–∞–µ–º 3 –Ω–∞–º–∞–∑–∞
      3. –í–∫–ª—é—á–∞–µ–º –∏–Ω—Ç–µ—Ä–Ω–µ—Ç
      4. –î–∞–Ω–Ω—ã–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ ‚úÖ
   
   ‚úÖ –°—Ü–µ–Ω–∞—Ä–∏–π 4: –ú–µ–Ω–µ–¥–∂–µ—Ä
      1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å A (–º–µ–Ω–µ–¥–∂–µ—Ä)
      2. –ü—Ä–∏–≥–ª–∞—à–∞–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è B
      3. B –Ω–∞–±–∏—Ä–∞–µ—Ç –±–∞–ª–ª—ã
      4. A –≤–∏–¥–∏—Ç B –≤ —Å–≤–æ–µ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–µ ‚úÖ
   
   ‚úÖ –°—Ü–µ–Ω–∞—Ä–∏–π 5: –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å
      1. –ê–¥–º–∏–Ω –∑–∞—Ö–æ–¥–∏—Ç
      2. –í–∏–¥–∏—Ç –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
      3. –í–∏–¥–∏—Ç –≤—Å–µ—Ö –º–µ–Ω–µ–¥–∂–µ—Ä–æ–≤
      4. –í–∏–¥–∏—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É Ramadan ‚úÖ
   ```

2. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö**
   ```sql
   -- –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –≤—Å–µ –¥–∞–Ω–Ω—ã–µ –Ω–∞ –º–µ—Å—Ç–µ
   SELECT COUNT(*) FROM users; -- –î–æ–ª–∂–Ω–æ –±—ã—Ç—å >= —Ç–µ–∫—É—â–µ–µ –∫–æ–ª-–≤–æ
   SELECT COUNT(*) FROM ramadan_data; -- –£—á–∞—Å—Ç–Ω–∏–∫–∏ Ramadan
   SELECT COUNT(*) FROM ramadan_ayat; -- –î–æ–ª–∂–Ω–æ –±—ã—Ç—å 30 –∑–∞–ø–∏—Å–µ–π
   SELECT COUNT(*) FROM referrals; -- –†–µ—Ñ–µ—Ä–∞–ª—ã –º–µ–Ω–µ–¥–∂–µ—Ä–æ–≤
   SELECT COUNT(*) FROM analytics; -- –ò—Å—Ç–æ—Ä–∏—è –¥–µ–π—Å—Ç–≤–∏–π
   ```

3. **Backup —Å–∏—Å—Ç–µ–º–∞**
   ```bash
   # –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –±—ç–∫–∞–ø –∫–∞–∂–¥—ã–π –¥–µ–Ω—å
   node backup-system.js auto
   
   # –ü—Ä–æ–≤–µ—Ä–∫–∞ –±—ç–∫–∞–ø–æ–≤
   node backup-system.js verify
   ```

4. **–°–æ–∑–¥–∞—ë–º –¥–æ–∫—É–º–µ–Ω—Ç TESTING_RESULTS.md**
   ```markdown
   # –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
   
   ‚úÖ –í—Å–µ 5 —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ –ø—Ä–æ–π–¥–µ–Ω—ã
   ‚úÖ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
   ‚úÖ –ë—ç–∫–∞–ø—ã —Å–æ–∑–¥–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
   ‚úÖ –î–∞–Ω–Ω—ã–µ –ù–ï —Ç–µ—Ä—è—é—Ç—Å—è –ø—Ä–∏ –¥–µ–ø–ª–æ–µ
   ‚úÖ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ
   
   ## –ü—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:
   - [x] –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –±–∞–ª–ª–æ–≤
   - [x] –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –Ω–∞–º–∞–∑–æ–≤
   - [x] –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ Ramadan –¥–∞–Ω–Ω—ã—Ö
   - [x] –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –º–µ–Ω–µ–¥–∂–µ—Ä–æ–≤
   - [x] –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å
   - [x] –û—Ñ–ª–∞–π–Ω —Ä–µ–∂–∏–º
   - [x] Telegram ID –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
   ```

#### –†–µ–∑—É–ª—å—Ç–∞—Ç:
- ‚úÖ 100% —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å, —á—Ç–æ –¥–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è
- ‚úÖ –í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã
- ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É

---

## üìà –ü–†–û–ì–†–ï–°–° –†–ï–ê–õ–ò–ó–ê–¶–ò–ò

```
–≠—Ç–∞–ø 1: –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö Ramadan       ‚ñì‚ñì‚ñì‚ñì‚ñì‚ñë‚ñë‚ñë‚ñë‚ñë 0%  ‚Üí 15%
–≠—Ç–∞–ø 2: Telegram ID –∑–∞—â–∏—Ç–∞         ‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñë‚ñë 15% ‚Üí 35%
–≠—Ç–∞–ø 3: –°–∏—Å—Ç–µ–º–∞ –º–µ–Ω–µ–¥–∂–µ—Ä–æ–≤         ‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñë 35% ‚Üí 60%
–≠—Ç–∞–ø 4: –£–ª—É—á—à–µ–Ω–∏–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏    ‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñë‚ñë‚ñë‚ñë 60% ‚Üí 75%
–≠—Ç–∞–ø 5: –ê—è—Ç—ã –¥–ª—è Ramadan           ‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñë‚ñë‚ñë‚ñë 75% ‚Üí 90%
–≠—Ç–∞–ø 6: –£–ª—É—á—à–µ–Ω–Ω–∞—è –∞–¥–º–∏–Ω–∫–∞         ‚ñì‚ñì‚ñì‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë 90% ‚Üí 95%
–≠—Ç–∞–ø 7: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ               ‚ñì‚ñì‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë 95% ‚Üí 100%

–ò–¢–û–ì–û: ‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë 0% ‚Üí 100%
```

---

## üéØ –ì–õ–ê–í–ù–´–ï –ì–ê–†–ê–ù–¢–ò–ò –ü–û–°–õ–ï –†–ï–ê–õ–ò–ó–ê–¶–ò–ò

### 1. **–î–∞–Ω–Ω—ã–µ –ù–ò–ö–û–ì–î–ê –Ω–µ –ø–æ—Ç–µ—Ä—è—é—Ç—Å—è** üîí
- ‚úÖ PostgreSQL –Ω–∞ Railway (–æ–±–ª–∞—á–Ω–∞—è –ë–î)
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –±—ç–∫–∞–ø—ã –∫–∞–∂–¥—ã–π –¥–µ–Ω—å
- ‚úÖ ON CONFLICT ‚Äî –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±–µ–∑ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è
- ‚úÖ Telegram ID ‚Äî —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∫–ª—é—á –Ω–∞–≤—Å–µ–≥–¥–∞

### 2. **–í—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç –æ—Ñ–ª–∞–π–Ω** üì±
- ‚úÖ localStorage ‚Üí –º–≥–Ω–æ–≤–µ–Ω–Ω–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ
- ‚úÖ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å —Å–µ—Ä–≤–µ—Ä–æ–º –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- ‚úÖ Retry –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö

### 3. **–ú–µ–Ω–µ–¥–∂–µ—Ä—ã –≤–∏–¥—è—Ç —Å–≤–æ—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É** üë•
- ‚úÖ –°–∫–æ–ª—å–∫–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ø—Ä–∏–≤–µ–ª–∏
- ‚úÖ –ö—Ç–æ –∞–∫—Ç–∏–≤–µ–Ω, –∫—Ç–æ –Ω–µ—Ç
- ‚úÖ –û–±—â–∏–µ –±–∞–ª–ª—ã –∫–æ–º–∞–Ω–¥—ã

### 4. **Ramadan –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–µ–Ω** üåô
- ‚úÖ –ê—è—Ç—ã –Ω–∞ –∫–∞–∂–¥—ã–π –¥–µ–Ω—å
- ‚úÖ –û—Ç–¥–µ–ª—å–Ω—ã–µ –∞—è—Ç—ã –¥–ª—è —Å—É—Ö—É—Ä–∞ –∏ –∏—Ñ—Ç–∞—Ä–∞
- ‚úÖ –¢—Ä–µ–∫–∏–Ω–≥ —Ü–µ–ª–µ–π –∏ –ø–æ—Å—Ç–æ–≤
- ‚úÖ –í—Å—ë —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ PostgreSQL

### 5. **–ê–¥–º–∏–Ω—ã –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É—é—Ç –≤—Å—ë** üìä
- ‚úÖ –í—Å–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
- ‚úÖ –í—Å–µ –º–µ–Ω–µ–¥–∂–µ—Ä—ã
- ‚úÖ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ Ramadan
- ‚úÖ –ü–æ–ª–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞

---

## üõ†Ô∏è –¢–ï–•–ù–ò–ß–ï–°–ö–ò–ï –î–ï–¢–ê–õ–ò

### –ù–æ–≤—ã–µ —Ç–∞–±–ª–∏—Ü—ã –≤ PostgreSQL:

```sql
-- –î–∞–Ω–Ω—ã–µ Ramadan –∫–∞–∂–¥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
ramadan_data (
  telegram_id BIGINT PRIMARY KEY,
  fasting_days JSONB,
  goals JSONB,
  updated_at BIGINT
)

-- –ê—è—Ç—ã –Ω–∞ –∫–∞–∂–¥—ã–π –¥–µ–Ω—å Ramadan
ramadan_ayat (
  id SERIAL PRIMARY KEY,
  day INT UNIQUE,
  suhoor_ayat JSONB,
  iftar_ayat JSONB,
  recommendation TEXT
)

-- –†–µ—Ñ–µ—Ä–∞–ª—ã –º–µ–Ω–µ–¥–∂–µ—Ä–æ–≤
referrals (
  id SERIAL PRIMARY KEY,
  manager_id BIGINT,
  user_id BIGINT,
  joined_at BIGINT
)
```

### –û–±–Ω–æ–≤–ª–µ–Ω–∏—è –≤ users:

```sql
ALTER TABLE users ADD COLUMN role TEXT DEFAULT 'user';
ALTER TABLE users ADD COLUMN referred_by BIGINT;
ALTER TABLE users ADD COLUMN manager_stats JSONB;
```

### –ù–æ–≤—ã–µ API endpoints:

```
GET  /api/ramadan/ayat/:day           ‚Äî –ê—è—Ç –¥–Ω—è
POST /api/ramadan/data/:telegramId    ‚Äî –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –¥–∞–Ω–Ω—ã–µ Ramadan
GET  /api/manager/:telegramId/stats   ‚Äî –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –º–µ–Ω–µ–¥–∂–µ—Ä–∞
GET  /api/admin/managers              ‚Äî –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –º–µ–Ω–µ–¥–∂–µ—Ä–æ–≤
GET  /api/admin/ramadan               ‚Äî –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ Ramadan
```

---

## ‚è±Ô∏è –í–†–ï–ú–Ø –†–ï–ê–õ–ò–ó–ê–¶–ò–ò

| –≠—Ç–∞–ø | –í—Ä–µ–º—è | –ú–æ–∂–Ω–æ –Ω–∞—á–∞—Ç—å |
|------|-------|--------------|
| 1. –ë–∞–∑–∞ Ramadan | 30 –º–∏–Ω | –°–µ–π—á–∞—Å |
| 2. Telegram ID | 45 –º–∏–Ω | –ü–æ—Å–ª–µ —ç—Ç–∞–ø–∞ 1 |
| 3. –ú–µ–Ω–µ–¥–∂–µ—Ä—ã | 1 —á–∞—Å | –ü–æ—Å–ª–µ —ç—Ç–∞–ø–∞ 2 |
| 4. –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è | 30 –º–∏–Ω | –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ —ç—Ç–∞–ø—É 3 |
| 5. –ê—è—Ç—ã | 2 —á–∞—Å–∞ | –ü–æ—Å–ª–µ —ç—Ç–∞–ø–∞ 1 |
| 6. –ê–¥–º–∏–Ω–∫–∞ | 45 –º–∏–Ω | –ü–æ—Å–ª–µ —ç—Ç–∞–ø–∞ 3 |
| 7. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ | 1 —á–∞—Å | –ü–æ—Å–ª–µ –≤—Å–µ—Ö —ç—Ç–∞–ø–æ–≤ |

**–ò–¢–û–ì–û:** ~6.5 —á–∞—Å–æ–≤ —á–∏—Å—Ç–æ–π —Ä–∞–±–æ—Ç—ã

**–ú–æ–∂–Ω–æ —Ä–∞–∑–±–∏—Ç—å –Ω–∞ 2 –¥–Ω—è:**
- –î–µ–Ω—å 1: –≠—Ç–∞–ø—ã 1-3 (2 —á–∞—Å–∞ 15 –º–∏–Ω) ‚Üí 60%
- –î–µ–Ω—å 2: –≠—Ç–∞–ø—ã 4-7 (4 —á–∞—Å–∞ 15 –º–∏–Ω) ‚Üí 100%

---

## üöÄ –ö–ê–ö –ù–ê–ß–ê–¢–¨?

### –í–∞—Ä–∏–∞–Ω—Ç 1: –í—Å—ë —Å—Ä–∞–∑—É (6.5 —á–∞—Å–æ–≤)
```bash
# –ì–æ—Ç–æ–≤—ã –Ω–∞—á–∞—Ç—å –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å?
# –°–∫–∞–∂–∏—Ç–µ: "–ù–∞—á–∏–Ω–∞–µ–º —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é"
# –Ø –±—É–¥—É –¥–µ–ª–∞—Ç—å —ç—Ç–∞–ø –∑–∞ —ç—Ç–∞–ø–æ–º –∏ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ü–æ —ç—Ç–∞–ø–∞–º
```bash
# –°–∫–∞–∂–∏—Ç–µ –Ω–æ–º–µ—Ä —ç—Ç–∞–ø–∞, –∫–æ—Ç–æ—Ä—ã–π —Ö–æ—Ç–∏—Ç–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å:
# "–ù–∞—á–Ω–∏ —Å —ç—Ç–∞–ø–∞ 1" ‚Äî –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö Ramadan
# "–ù–∞—á–Ω–∏ —Å —ç—Ç–∞–ø–∞ 2" ‚Äî Telegram ID –∑–∞—â–∏—Ç–∞
# "–ù–∞—á–Ω–∏ —Å —ç—Ç–∞–ø–∞ 5" ‚Äî –ê—è—Ç—ã –¥–ª—è Ramadan
# –ò —Ç.–¥.
```

### –í–∞—Ä–∏–∞–Ω—Ç 3: –¢–æ–ª—å–∫–æ –∫—Ä–∏—Ç–∏—á–Ω–æ–µ
```bash
# –°–∞–º–æ–µ –≤–∞–∂–Ω–æ–µ –¥–ª—è –Ω–∞—á–∞–ª–∞:
# 1. –≠—Ç–∞–ø 1 (–ë–∞–∑–∞ Ramadan) ‚Äî 30 –º–∏–Ω
# 2. –≠—Ç–∞–ø 5 (–ê—è—Ç—ã) ‚Äî 2 —á–∞—Å–∞
# 3. –≠—Ç–∞–ø 7 (–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ) ‚Äî 1 —á–∞—Å
# –ò–¢–û–ì–û: 3.5 —á–∞—Å–∞ ‚Üí Ramadan –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤
```

---

## üìû –ö–û–ù–¢–ê–ö–¢–´

**–ï—Å–ª–∏ –µ—Å—Ç—å –≤–æ–ø—Ä–æ—Å—ã:**
- Telegram: @ATAVALIEV
- –í—Å–µ –≤–æ–ø—Ä–æ—Å—ã –ø–æ –ø—Ä–æ–µ–∫—Ç—É ‚Äî –ø–∏—à–∏—Ç–µ –≤ Telegram

---

**–ì–û–¢–û–í –ù–ê–ß–ê–¢–¨ –ö–û–ì–î–ê –°–ö–ê–ñ–ï–¢–ï!** üöÄ
