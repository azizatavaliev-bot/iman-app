# üìä IMAN App ‚Äî –°—Ç–∞—Ç—É—Å –ë–∞–∑—ã –î–∞–Ω–Ω—ã—Ö

## ‚úÖ –ß—Ç–æ —É–∂–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:

### 1. **–°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω**
- ‚úÖ Health check: `https://iman-app-production.up.railway.app/health`
- ‚úÖ –°—Ç–∞—Ç—É—Å: `{"status":"ok","subscribers":2,"uptime":789}`
- ‚úÖ –£–∂–µ –µ—Å—Ç—å 2 –ø–æ–¥–ø–∏—Å—á–∏–∫–∞!

### 2. **PostgreSQL —Å–æ–∑–¥–∞–Ω –Ω–∞ Railway**
- ‚úÖ PostgreSQL —Å–µ—Ä–≤–∏—Å —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –ù–∞–∑–≤–∞–Ω–∏–µ –ë–î: `railway`
- ‚úÖ –•–æ—Å—Ç: `postgres.railway.internal`

---

## ‚ö†Ô∏è –ö–†–ò–¢–ò–ß–ù–û: –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –ù–ï –ø–æ–¥–∫–ª—é—á–µ–Ω–∞!

### –ü—Ä–æ–±–ª–µ–º–∞:
–°–µ—Ä–≤–µ—Ä **–ù–ï –∏—Å–ø–æ–ª—å–∑—É–µ—Ç PostgreSQL** ‚Äî —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –≤—Ä–µ–º–µ–Ω–Ω–æ–º SQLite –≤ –ø–∞–º—è—Ç–∏.

**–ü–æ—á–µ–º—É:** –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è –æ–∫—Ä—É–∂–µ–Ω–∏—è –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è `DATABASE_UR` –≤–º–µ—Å—Ç–æ `DATABASE_URL`

---

## üîß –ö–∞–∫ –∏—Å–ø—Ä–∞–≤–∏—Ç—å (2 –º–∏–Ω—É—Ç—ã):

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ß–µ—Ä–µ–∑ Railway Dashboard

1. –û—Ç–∫—Ä–æ–π—Ç–µ https://railway.app/dashboard ‚Üí IMAN APP
2. –ö–ª–∏–∫–Ω–∏—Ç–µ –Ω–∞ —Å–µ—Ä–≤–∏—Å **iman-app** (–Ω–µ Postgres!)
3. –í–∫–ª–∞–¥–∫–∞ **Variables**
4. –ù–∞–π–¥–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é **DATABASE_UR**
5. –£–¥–∞–ª–∏—Ç–µ –µ—ë (—Ç—Ä–∏ —Ç–æ—á–∫–∏ ‚Üí Delete)
6. –ù–∞–∂–º–∏—Ç–µ **+ New Variable**
7. **Variable Name:** `DATABASE_URL`
8. **Value:** –ù–∞–∂–º–∏—Ç–µ **+ Add Reference** ‚Üí –≤—ã–±–µ—Ä–∏—Ç–µ **Postgres** ‚Üí **DATABASE_URL**
9. –ù–∞–∂–º–∏—Ç–µ **Add**

Railway –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç —Å–µ—Ä–≤–∏—Å —Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π!

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —á–µ—Ä–µ–∑ Reference

1. Railway Dashboard ‚Üí **iman-app** ‚Üí Variables
2. **+ New Variable** ‚Üí **Reference**
3. Select service: **Postgres**
4. Select variable: **DATABASE_URL**
5. **Add**

---

## üì¶ –ß—Ç–æ —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö:

### –¢–∞–±–ª–∏—Ü–∞ `users` ‚Äî –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

| –ü–æ–ª–µ | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|-----|----------|
| `telegram_id` | BIGINT | –£–Ω–∏–∫–∞–ª—å–Ω—ã–π ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ Telegram (PRIMARY KEY) |
| `data` | JSONB | –í–µ—Å—å –ø—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ JSON |
| `updated_at` | BIGINT | Unix timestamp –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è |

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ data (JSON):**
```json
{
  "name": "–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è",
  "city": "–ú–æ—Å–∫–≤–∞",
  "totalPoints": 1500,
  "level": "–ü—Ä–∞–∫—Ç–∏–∫—É—é—â–∏–π",
  "streak": 7,
  "onboarded": true,
  "profile": {
    "gender": "male",
    "age": 25
  },
  "prayerLogs": {
    "2026-02-18": {
      "fajr": true,
      "dhuhr": true,
      "asr": false,
      "maghrib": false,
      "isha": false
    }
  },
  "habitLogs": [...],
  "bookmarks": [...]
}
```

**–ò–Ω–¥–µ–∫—Å:** `idx_users_updated_at` ‚Äî –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞ –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

---

### –¢–∞–±–ª–∏—Ü–∞ `analytics` ‚Äî —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –¥–µ–π—Å—Ç–≤–∏–π

| –ü–æ–ª–µ | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|-----|----------|
| `id` | SERIAL | –ê–≤—Ç–æ–∏–Ω–∫—Ä–µ–º–µ–Ω—Ç ID |
| `telegram_id` | BIGINT | –°–≤—è–∑—å —Å users (FOREIGN KEY) |
| `type` | TEXT | –¢–∏–ø —Å–æ–±—ã—Ç–∏—è: `page_view`, `action`, `session_end` |
| `page` | TEXT | –°—Ç—Ä–∞–Ω–∏—Ü–∞: `/prayers`, `/quran`, `/quiz` |
| `action` | TEXT | –î–µ–π—Å—Ç–≤–∏–µ: `prayer_marked`, `quiz_completed` |
| `metadata` | JSONB | –î–æ–ø. –¥–∞–Ω–Ω—ã–µ –≤ JSON |
| `timestamp` | BIGINT | Unix timestamp —Å–æ–±—ã—Ç–∏—è |

**–ò–Ω–¥–µ–∫—Å—ã:**
- `idx_analytics_telegram_id` ‚Äî –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –ø–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
- `idx_analytics_type` ‚Äî –¥–ª—è –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏ –ø–æ —Ç–∏–ø—É
- `idx_analytics_timestamp` ‚Äî –¥–ª—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ –ø–æ –≤—Ä–µ–º–µ–Ω–∏

**–ü—Ä–∏–º–µ—Ä—ã –¥–∞–Ω–Ω—ã—Ö:**
```json
{
  "telegram_id": 123456789,
  "type": "action",
  "page": "/prayers",
  "action": "prayer_marked",
  "metadata": {"prayer": "fajr", "status": true},
  "timestamp": 1708275234567
}
```

---

## üìä –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å ‚Äî —á—Ç–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç:

–ü–æ—Å–ª–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è PostgreSQL –∞–¥–º–∏–Ω–∫–∞ –±—É–¥–µ—Ç –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å:

### 1. **–û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ (4 –∫–∞—Ä—Ç–æ—á–∫–∏):**
- –í—Å–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –û–Ω–ª–∞–π–Ω —Å–µ–π—á–∞—Å (–∞–∫—Ç–∏–≤–Ω—ã –≤ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 5 –º–∏–Ω)
- –ê–∫—Ç–∏–≤–Ω—ã—Ö —Å–µ–≥–æ–¥–Ω—è (–ø–æ—Å–ª–µ–¥–Ω–∏–µ 24 —á–∞—Å–∞)
- –ê–∫—Ç–∏–≤–Ω—ã—Ö –∑–∞ –Ω–µ–¥–µ–ª—é

### 2. **–°—Ä–µ–¥–Ω–∏–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏:**
- –°—Ä–µ–¥–Ω–∏–π —É—Ä–æ–≤–µ–Ω—å
- –°—Ä–µ–¥–Ω–∏–µ –±–∞–ª–ª—ã
- –°—Ä–µ–¥–Ω–∏–π —Å—Ç—Ä–∏–∫ (—Å–µ—Ä–∏—è –¥–Ω–µ–π)

### 3. **–¢–∞–±–ª–∏—Ü–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:**
| Telegram ID | –ò–º—è | –£—Ä–æ–≤–µ–Ω—å | –ë–∞–ª–ª—ã | –°—Ç—Ä–∏–∫ | –ü–æ—Å–ª–µ–¥–Ω—è—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å |
|-------------|-----|---------|-------|-------|----------------------|
| 123456789 | –ê–∑–∏–∑ | –ü—Ä–∞–∫—Ç–∏–∫—É—é—â–∏–π | 1,850 | 12 –¥–Ω | 2 –º–∏–Ω—É—Ç—ã –Ω–∞–∑–∞–¥ |
| 987654321 | –ê–∫—ã–ª–∞–π | –ù–∞—á–∏–Ω–∞—é—â–∏–π | 450 | 3 –¥–Ω | 1 —á–∞—Å –Ω–∞–∑–∞–¥ |

### 4. **–ü–æ–ø—É–ª—è—Ä–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã (—Ç–æ–ø-10):**
```
1. Dashboard ‚Äî 1,234 –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤
2. –ù–∞–º–∞–∑—ã ‚Äî 856 –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤
3. –í–∏–∫—Ç–æ—Ä–∏–Ω–∞ ‚Äî 456 –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤
4. –•–∞–¥–∏—Å—ã ‚Äî 234 –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤
5. –ö–æ—Ä–∞–Ω ‚Äî 189 –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤
```

### 5. **–ü–æ–ø—É–ª—è—Ä–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è (—Ç–æ–ø-10):**
```
1. prayer_marked ‚Äî 2,345 —Ä–∞–∑
2. habit_completed ‚Äî 1,234 —Ä–∞–∑
3. quiz_finished ‚Äî 567 —Ä–∞–∑
4. page_viewed ‚Äî 456 —Ä–∞–∑
5. bookmark_added ‚Äî 123 —Ä–∞–∑
```

### 6. **–ì—Ä–∞—Ñ–∏–∫ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏:**
–ü–æ—á–∞—Å–æ–≤–æ–π –≥—Ä–∞—Ñ–∏–∫ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 24 —á–∞—Å–∞.

---

## ‚úÖ –ü–æ—Å–ª–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è DATABASE_URL:

1. ‚úÖ –í—Å–µ –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ PostgreSQL
2. ‚úÖ –ë–∞–ª–ª—ã, —É—Ä–æ–≤–Ω–∏, —Å—Ç—Ä–∏–∫–∏ ‚Äî –≤—Å—ë —Ö—Ä–∞–Ω–∏—Ç—Å—è –ø–æ—Å—Ç–æ—è–Ω–Ω–æ
3. ‚úÖ –î–∞–Ω–Ω—ã–µ –ù–ï —Ç–µ—Ä—è—é—Ç—Å—è –ø—Ä–∏ –¥–µ–ø–ª–æ—è—Ö
4. ‚úÖ –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø–æ–ª–Ω—É—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
5. ‚úÖ –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç (–∫—Ç–æ —á—Ç–æ –¥–µ–ª–∞–µ—Ç –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏)

---

## üéØ –ö–æ–Ω—Ç–∞–∫—Ç—ã –æ–±–Ω–æ–≤–ª–µ–Ω—ã:

–¢–µ–ø–µ—Ä—å –≤ —Ä–∞–∑–¥–µ–ª–µ "–û –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏" –≤—Å–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –≤–∏–¥—è—Ç:

- **Telegram:** @ATAVALIEV
- **–ü–æ –≤—Å–µ–º –≤–æ–ø—Ä–æ—Å–∞–º:** –ü–∏—à–∏—Ç–µ @ATAVALIEV

–í—Å–µ –≤–æ–ø—Ä–æ—Å—ã –∏ –æ–±—Ä–∞—â–µ–Ω–∏—è –±—É–¥—É—Ç –ø—Ä–∏—Ö–æ–¥–∏—Ç—å –≤–∞–º –≤ Telegram!

---

## üöÄ –°–ª–µ–¥—É—é—â–∏–π —à–∞–≥:

**–ü–û–î–ö–õ–Æ–ß–ò–¢–ï DATABASE_URL –°–ï–ô–ß–ê–°!**

1. Railway Dashboard ‚Üí iman-app ‚Üí Variables
2. –£–¥–∞–ª–∏—Ç–µ DATABASE_UR
3. –î–æ–±–∞–≤—å—Ç–µ Reference –Ω–∞ Postgres ‚Üí DATABASE_URL
4. –ü–æ–¥–æ–∂–¥–∏—Ç–µ 1-2 –º–∏–Ω—É—Ç—ã
5. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å ‚Äî —É–≤–∏–¥–∏—Ç–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É!

**–í—Ä–µ–º—è: 2 –º–∏–Ω—É—Ç—ã**  
**–í–∞–∂–Ω–æ—Å—Ç—å: –ö–†–ò–¢–ò–ß–ù–ê**

–ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ –í–°–Ø —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –±—É–¥–µ—Ç —Ö—Ä–∞–Ω–∏—Ç—å—Å—è –Ω–∞–≤—Å–µ–≥–¥–∞! üéâ
