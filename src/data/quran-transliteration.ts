// =============================================================================
// Транскрипция Корана КИРИЛЛИЦЕЙ (для русскоязычных мусульман)
// Основано на правилах чтения арабского языка
// =============================================================================

export interface AyahTransliteration {
  surah: number;
  ayah: number;
  cyrillic: string; // Транскрипция кириллицей (как читается)
}

// Транскрипция сур которые чаще всего читают наизусть
export const QURAN_TRANSLITERATION: Record<string, AyahTransliteration> = {
  // ==========================================================================
  // Сура 1 — Аль-Фатиха (самая важная сура, читается в каждом намазе)
  // ==========================================================================
  "1:1": {
    surah: 1,
    ayah: 1,
    cyrillic: "Бисмилля́хир-Рахма́нир-Рахи́м",
  },
  "1:2": {
    surah: 1,
    ayah: 2,
    cyrillic: "Альха́мду лилля́хи Раббиль-'а́лями́н",
  },
  "1:3": {
    surah: 1,
    ayah: 3,
    cyrillic: "Ар-Рахма́нир-Рахи́м",
  },
  "1:4": {
    surah: 1,
    ayah: 4,
    cyrillic: "Ма́лики я́умид-ди́н",
  },
  "1:5": {
    surah: 1,
    ayah: 5,
    cyrillic: "Ийя́кя на'бу́ду ва ийя́кя наста'и́н",
  },
  "1:6": {
    surah: 1,
    ayah: 6,
    cyrillic: "Ихдина́с-сыра́таль-мустакы́м",
  },
  "1:7": {
    surah: 1,
    ayah: 7,
    cyrillic: "Сыра́таль-лязи́на ан'а́мта 'аля́йхим, гайриль-магду́би 'аля́йхим ва ля́д-да́ллин. Ами́н.",
  },

  // ==========================================================================
  // Сура 112 — Аль-Ихлас (Искренность) — очень короткая, часто читают
  // ==========================================================================
  "112:1": {
    surah: 112,
    ayah: 1,
    cyrillic: "Куль Хува Ллаху Аха́д",
  },
  "112:2": {
    surah: 112,
    ayah: 2,
    cyrillic: "Алла́хус-Са́мад",
  },
  "112:3": {
    surah: 112,
    ayah: 3,
    cyrillic: "Лям я́лид ва лям ю́ляд",
  },
  "112:4": {
    surah: 112,
    ayah: 4,
    cyrillic: "Ва лям я́кун ляху ку́фуван аха́д",
  },

  // ==========================================================================
  // Сура 113 — Аль-Фаляк (Рассвет) — защита от зла
  // ==========================================================================
  "113:1": {
    surah: 113,
    ayah: 1,
    cyrillic: "Куль а'у́зу бираббиль-фаля́к",
  },
  "113:2": {
    surah: 113,
    ayah: 2,
    cyrillic: "Мин ша́рри ма халя́к",
  },
  "113:3": {
    surah: 113,
    ayah: 3,
    cyrillic: "Ва мин ша́рри га́сикын иза́ вака́б",
  },
  "113:4": {
    surah: 113,
    ayah: 4,
    cyrillic: "Ва мин ша́ррин-наффа́са́ти филь-'ука́д",
  },
  "113:5": {
    surah: 113,
    ayah: 5,
    cyrillic: "Ва мин ша́рри ха́сидин иза́ ха́сад",
  },

  // ==========================================================================
  // Сура 114 — Ан-Нас (Люди) — защита от шайтана
  // ==========================================================================
  "114:1": {
    surah: 114,
    ayah: 1,
    cyrillic: "Куль а'у́зу бираббин-на́с",
  },
  "114:2": {
    surah: 114,
    ayah: 2,
    cyrillic: "Ма́ликин-на́с",
  },
  "114:3": {
    surah: 114,
    ayah: 3,
    cyrillic: "Иля́хин-на́с",
  },
  "114:4": {
    surah: 114,
    ayah: 4,
    cyrillic: "Мин ша́рриль-васва́силь-ханна́с",
  },
  "114:5": {
    surah: 114,
    ayah: 5,
    cyrillic: "Аллязи́ юва́свису фи́ суду́рин-на́с",
  },
  "114:6": {
    surah: 114,
    ayah: 6,
    cyrillic: "Миналь-джи́ннати ван-на́с",
  },

  // ==========================================================================
  // Сура 36 — Йа Син (Сердце Корана) — первые 3 аята
  // ==========================================================================
  "36:1": {
    surah: 36,
    ayah: 1,
    cyrillic: "Йа́. Си́н.",
  },
  "36:2": {
    surah: 36,
    ayah: 2,
    cyrillic: "Валь-Кур'а́ниль-хаки́м",
  },
  "36:3": {
    surah: 36,
    ayah: 3,
    cyrillic: "Иннакя ляминаль-мурсали́н",
  },

  // ==========================================================================
  // Сура 67 — Аль-Мульк (Власть) — первые 3 аята
  // ==========================================================================
  "67:1": {
    surah: 67,
    ayah: 1,
    cyrillic: "Таба́ракаль-лязи́ биядихиль-му́льку ва хува 'аля́ ку́лли шай'ин кади́р",
  },
  "67:2": {
    surah: 67,
    ayah: 2,
    cyrillic: "Аллязи́ халякаль-ма́ута валь-хая́та лияблювакум аййукум а́хсану 'амаля́, ва хуваль-'Ази́зуль-Гафу́р",
  },
  "67:3": {
    surah: 67,
    ayah: 3,
    cyrillic: "Аллязи́ халя́ка саб'а сама́ватин тыба́кя, ма́ тара́ фи́ хальки́р-Рахма́ни мин тафа́вут, фарджи'иль-ба́сара халь тара́ мин футу́р",
  },

  // ==========================================================================
  // Аятуль-Курси (Сура 2, аят 255) — самый великий аят Корана
  // ==========================================================================
  "2:255": {
    surah: 2,
    ayah: 255,
    cyrillic: "Алла́ху ля́ иля́ха илля́ Ху́ва, аль-Хаййуль-Кайю́м. Ля́ та'ху́зуху сина́тун ва ля́ на́ум. Ляху́ ма́ фис-сама́вати ва ма́ филь-ард. Ман заль-лязи́ яшфа'у́ 'индаху́ илля́ би-изних. Я'ляму ма́ бэйна айди́хим ва ма́ хальфахум. Ва ля́ юхи́туна би-шай'ин мин 'ильмихи́ илля́ би-ма́ ша́'. Васи'а ку́рсийюху́с-сама́вати валь-ард. Ва ля́ яуду́ху хифзуху́ма. Ва Хуваль-'Алиййуль-'Азы́м.",
  },

  // ==========================================================================
  // Последние два аята суры Аль-Бакара (2:286)
  // ==========================================================================
  "2:285": {
    surah: 2,
    ayah: 285,
    cyrillic: "А́мана р-Расу́лю бима́ у́нзиля иля́йхи мир-Раббихи́ валь-му'мину́н, куллюн а́мана билля́хи ва маля́икятихи́ ва ку́тубихи́ ва русу́лих, ля́ нуфа́рикъу бэйна аха́дин мир-русу́лих, ва ка́лю сами'на́ ва ата'на́, гуфра́накя Раббана́ ва иляйкаль-маси́р",
  },
  "2:286": {
    surah: 2,
    ayah: 286,
    cyrillic: "Ля́ юкаллифулла́ху нафсан илля́ вус'аха́. Ляха́ ма́ кя́сабат ва 'аля́йха́ максаба́т. Раббана́ ля́ туа́хизна́ ин наси́на́ ау ахта'на́. Раббана́ ва ля́ тахмиль 'аля́йна́ ысран кяма́ хамальтаху́ 'аляль-лязи́на мин кабли́на́. Раббана́ ва ля́ тухаммильна́ ма́ ля́ та́къата ляна́ бих. Ва'фу 'анна́ вагфи́р ляна́ вархамна́. А́нта Маула́на фан-сурна́ 'аляль-ка́умиль-кяфири́н",
  },
};

/**
 * Получить транскрипцию кириллицей для аята
 */
export function getTransliteration(surah: number, ayah: number): string | null {
  const key = `${surah}:${ayah}`;
  return QURAN_TRANSLITERATION[key]?.cyrillic || null;
}

/**
 * Проверить, есть ли транскрипция для аята
 */
export function hasTransliteration(surah: number, ayah: number): boolean {
  const key = `${surah}:${ayah}`;
  return key in QURAN_TRANSLITERATION;
}

/**
 * Получить все транскрипции для суры
 */
export function getSurahTransliterations(surah: number): AyahTransliteration[] {
  return Object.values(QURAN_TRANSLITERATION)
    .filter((t) => t.surah === surah)
    .sort((a, b) => a.ayah - b.ayah);
}

/**
 * Список сур с транскрипцией
 */
export function getSurahsWithTransliteration(): number[] {
  const surahs = new Set<number>();
  for (const t of Object.values(QURAN_TRANSLITERATION)) {
    surahs.add(t.surah);
  }
  return Array.from(surahs).sort((a, b) => a - b);
}
